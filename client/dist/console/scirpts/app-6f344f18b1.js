(function(){"use strict";function e(e,t){e.state("app.users",{url:"/users",views:{content:{templateUrl:"console/main/users/users.template.html",controller:"UsersController as vm"}},resolve:{data:["User",function(e){return e.find({filter:{include:"roles"}})}]},onEnter:["Toolbar",function(e){return e.config({parent:{text:"User",sref:"app.users"},buttons:{text:"Add User","class":"btn-success",sref:"app.add-user"}})}]}),t.saveItem("content",{name:"Content",isGroup:!0}),t.saveItem("content.users",{name:"User",sref:"app.users",icon:"fui-user",requireAdmin:!0})}e.$inject=["$stateProvider","SidebarMenuProvider"],angular.module("app.users",[]).config(e)}).call(this),function(){"use strict";function e(e,t,o,a){var n;n=this,n.users=e}e.$inject=["data","$state","$rootScope","$scope"],angular.module("app.users").controller("UsersController",e)}.call(this),function(){"use strict";function e(e,t){e.state("app.user-detail",{url:"/user/:id",views:{content:{templateUrl:"console/main/user-detail/user-detail.template.html",controller:"UserDetailController as vm"}},resolve:{data:["User","$stateParams",function(e,t){return e.findById({id:t.id,filter:{include:"roles"}})}]}}),t.saveItem("user.profile",{name:"Profile",sref:"app.user-detail(Auth.currentUser)",icon:"fui-new"})}e.$inject=["$stateProvider","SidebarMenuProvider"],angular.module("app.user-detail",[]).config(e)}.call(this),function(){"use strict";function e(e,t,o,a,n,s,r,l){var i,d;i=this,e.$promise.then(function(){l.config({parent:{text:"User",sref:"app.users",needAdmin:!0},child:{text:e.username},buttons:{text:"Save","class":"btn-info"}})}),o.$watch("userDetailForm.$invalid",function(e){l.enableBtn(0,!e)}),l.onClick=function(){i.save()},o.$on("$destroy",function(){l.onClick=function(){},i.dirty&&n.prototype$updateAttributes(i.user).$promise.then(function(){if(s.isAdmin())return d()}).then(function(){r.send("success","Save success")})}),$("#avatar-input-modal").on("shown.bs.modal",function(){i.avatar=i.user.avatar,o.$digest()}),i.user=e,o.$watch(function(){return o.userDetailForm.$dirty},function(e){i.dirty=e}),d=function(){return _.includes(i.user.roles,"admin")?_.includes(i.user.roles,"admin")?n.prototype$addRolesById({id:i.user.id,roleNames:["admin"]}).$promise:Promise.resolve():n.prototype$deleteRoleById({id:i.user.id,roleName:"admin"}).$promise},i.save=function(){o.userDetailForm.$invalid||n.prototype$updateAttributes(i.user).$promise.then(function(){if(s.isAdmin())return d()}).then(function(){r.send("success","Save success")})["catch"](function(e){r.send("danger",e.data.error.message)})},i.saveAvatar=function(){i.user.avatar=i.avatar},i["delete"]=function(){o.deleteForm.$invalid||n.deleteById({id:i.user.id}).$promise.then(function(){r.send("danger","Delete success"),t.go("app.users")})["catch"](function(e){r.send("danger",e.data.error.message)})}}e.$inject=["data","$state","$scope","$rootScope","User","Auth","Notification","Toolbar"],angular.module("app.user-detail").controller("UserDetailController",e)}.call(this),function(){"use strict";function e(e,t){e.state("app.tags",{url:"/tags",views:{content:{templateUrl:"console/main/tags/tags.template.html",controller:"TagsController as vm"}},resolve:{tags:["Tag",function(e){return e.find({filter:{include:{relation:"documents",scope:{fields:{id:!0}}}}})}]}}).state("app.tags.main",{url:"/",onEnter:function(e,t){$(".tags-list").removeClass("split-tag-list col-md-6 visible-md-block visible-lg-block"),$(".tag-detail-content").removeClass("split-tag-detail"),t.config({parent:{text:"Tag",sref:"app.tags.main"},buttons:{text:"Add tag","class":"btn-success",sref:"app.tags.new"}})}}),t.saveItem("content.tags",{name:"Tag",sref:"app.tags.main",icon:"fui-tag",weight:1})}e.$inject=["$stateProvider","SidebarMenuProvider"],angular.module("app.tags",[]).config(e)}.call(this),function(){"use strict";function e(e,t,o,a,n){var s;s=this,s.tags=e,o.$on("reload tags",function(){s.tags=n.find({filter:{include:{relation:"documents",scope:{fields:{id:!0}}}}})}),s.detail=function(e){t.go("app.tags.detail",e)}}e.$inject=["tags","$state","$scope","$rootScope","Tag"],angular.module("app.tags").controller("TagsController",e)}.call(this),function(){"use strict";function e(e,t){e.state("app.tags.detail",{url:"/detail/:id",views:{"detail@app.tags":{controller:"TagDetailController as vm",templateUrl:"console/main/tag-detail/tag-detail.template.html"}},resolve:{tag:["Tag","$stateParams",function(e,t){return e.findById({id:t.id})}]}})}e.$inject=["$stateProvider","SidebarMenuProvider"],angular.module("app.tag-detail",[]).config(e)}.call(this),function(){"use strict";function e(e,t,o,a,n,s,r){var l,i,d;l=this,$(".tags-list").addClass("split-tag-list col-md-6 visible-md-block visible-lg-block"),$(".tag-detail-content").addClass("split-tag-detail"),e.$promise.then(function(){l.image=l.tag.image,r.config({parent:{text:"Tag",sref:"app.tags.main"},child:{text:e.name},buttons:{text:"Save","class":"btn-success"}})}),l.tag=e,o.$watch(function(){return o.tagDetailForm.$dirty},function(e){l.dirty=e}),r.onClick=function(){d()},o.$on("$destroy",function(){r.onClick=function(){},l.dirty&&s.prototype$updateAttributes(l.tag).$promise.then(function(){i(),n.send("success","Save success")})}),i=function(){a.$broadcast("reload tags")},d=function(){s.prototype$updateAttributes(l.tag).$promise.then(function(){i(),n.send("success","Save success")})["catch"](function(e){n.send("danger",e.data.error.message)})},l.saveImage=function(){l.tag.image=l.image},l.deleteTag=function(){s.deleteById(l.tag).$promise.then(function(){i(),t.go("app.tags.main"),n.send("danger","Delete success")})["catch"](function(e){n.send("danger",e.data.error.message)})}}e.$inject=["tag","$state","$scope","$rootScope","Notification","Tag","Toolbar"],angular.module("app.tag-detail").controller("TagDetailController",e)}.call(this),function(){"use strict";function e(e,t){e.state("app.setting",{url:"/setting",views:{"content@app":{controller:"SettingController as vm",templateUrl:"console/main/setting/setting.template.html"}},onEnter:["Toolbar",function(e){e.config({parent:{text:"Setting",sref:"app.setting"},buttons:{text:"Save","class":"btn-success"}})}]}),t.saveItem("setting",{name:"Setting",isGroup:!0,requireAdmin:!0}),t.saveItem("setting.general",{name:"General",sref:"app.setting",icon:"fui-cmd",requireAdmin:!0})}e.$inject=["$stateProvider","SidebarMenuProvider"],angular.module("app.setting",[]).config(e)}.call(this),function(){"use strict";function e(e,t,o,a,n,s,r){var l,i,d;l=this,i=function(){return a.isLoaded},o.$watch(i,function(e){e&&(l.setting=_.cloneDeep(a.currentSetting),l.logo=l.setting.logo,l.cover=l.setting.cover)}),o.$watch(function(){return o.settingForm.$dirty},function(e){l.dirty=e}),l.saveLogo=function(){l.setting.logo=l.logo},l.saveCover=function(){l.setting.cover=l.cover},s.onClick=function(){l.saveSetting()},o.$on("$destroy",function(){var e,t;s.onClick=function(){},l.dirty&&(e=_.map(l.setting,function(e,t){}),{key:key,value:value},t=_.map(e,function(e){return r.upsert(e).$promise}),Promise.all(t))}),l.addNavigationItem=function(){l.setting.navigation.push({label:"",url:""})},l.deleteNavigationItem=function(e){var t;t=l.setting.navigation.indexOf(e),l.setting.navigation.splice(t,1)},d=function(e,t,o){var a;if(o>=e.length)for(a=o-e.length;a--+1;)e.push(void 0);return e.splice(o,0,e.splice(t,1)[0]),e},l.onDragStart=function(e,t,o){l.dragIndex=e.index(),o(e,t)},l.onDrop=function(e,t,o){var a,n;a=e.index(),n=l.dragIndex,o(e,t),d(l.setting.navigation,n,a)},l.saveSetting=function(){var e,t;return e=_.map(l.setting,function(e,t){return{key:t,value:e}}),t=_.map(e,function(e){return r.upsert(e).$promise}),Promise.all(t).then(function(){a.getSettings(),n.send("success","Save success")})["catch"](function(e){n.send("danger",e.data.error.message)})}}e.$inject=["$state","$rootScope","$scope","BlogSetting","Notification","Toolbar","Setting"],angular.module("app.setting").controller("SettingController",e)}.call(this),function(){"use strict";function e(e,t){e.state("logout",{url:"/console/logout",views:{main:{controller:"LogoutController as vm"}},resolve:{data:["Auth",function(e){return function(){return e.logOut()}}]}}),t.saveItem("user",{name:"User",isGroup:!0,weight:99}),t.saveItem("user.logout",{name:"Log out",sref:"logout",icon:"fui-exit",weight:99})}e.$inject=["$stateProvider","SidebarMenuProvider"],angular.module("app.logout",[]).config(e)}.call(this),function(){"use strict";function e(e,t,o,a){var n;n=this,e().then(function(){t.go("login"),a.send("success","Log out success")})["catch"](function(){t.go("login")})}e.$inject=["data","$state","$scope","Notification"],angular.module("app.logout").controller("LogoutController",e)}.call(this),function(){"use strict";function e(e,t){e.state("login",{url:"/console/login",views:{main:{templateUrl:"console/main/login/login.template.html",controller:"LoginController as vm"}}})}e.$inject=["$stateProvider","SidebarMenuProvider"],angular.module("app.login",[]).config(e)}.call(this),function(){"use strict";function e(e,t,o,a){var n;n=this,n.login=function(){n.emailOrUsername.search("@")===-1?n.loginUser.username=n.emailOrUsername:n.loginUser.email=n.emailOrUsername,a.logIn(n.loginUser).then(function(){e.go("app.documents")})["catch"](function(e){console.error(e),t.loginForm.password.$invalid=!0})},t.$watch("Auth.isLogedIn",function(t,o){t&&e.go("app.documents.main")})}e.$inject=["$state","$scope","$interval","Auth"],angular.module("app.login").controller("LoginController",e)}.call(this),function(){"use strict";function e(e,t){e.state("app.editor",{url:"/editor/:id",views:{"content@app":{templateUrl:"console/main/editor/editor.template.html",controller:"EditorController as vm"}},resolve:{document:["Document","$stateParams",function(e,t){return e.findById({id:t.id,filter:{fields:{html:!1},include:"tags"}})}],allTags:["Tag",function(e){return e.find({filter:{fields:{name:!0,id:!0}}})}]}})}e.$inject=["$stateProvider","SidebarMenuProvider"],angular.module("app.editor",[]).config(e)}.call(this),function(){"use strict";function e(e,t,o,a,n,s,r,l,i,d){var c,u,m,p;c=this,e.$promise.then(function(){c.tags=_.map(e.tags,"id"),c.orgTags=_.cloneDeep(c.tags),c.image=c.document.image,d.config({input:{text:e.title,placeholder:"Title"},buttons:[{icon:"fui-gear","class":"btn-empty"},{text:"Save","class":"btn-info"}]})}),c.document=e,c.allTags=t,a.imageTypeSwitch=!0,a.$watch("vm.document.markdown",function(){var e;e=s.render(c.document.markdown),$(".editor-html").html(e)}),d.inputChanged=function(e){c.document.title=e},d.onClick=function(e){switch(e){case 0:$("#editor-setting").collapse("toggle");break;case 1:c.saveDocument()}},a.$on("$destroy",function(){d.onClick=function(){},d.inputChanged=function(){}}),a.$watch("editorSettingForm.$invalid",function(e){d.enableBtn(1,!e)}),c.saveImage=function(){c.document.image=c.image},u=function(e){return l.tags.link({id:c.document.id,fk:e},{}).$promise},m=function(e){return l.tags.unlink({id:c.document.id,fk:e},{}).$promise},p=function(){var e,t,o;return e=_.difference(c.tags,c.orgTags),t=_.difference(c.orgTags,c.tags),o=_.concat(_.map(e,u),_.map(t,m)),Promise.all(o)},c.deleteDocument=function(){l.deleteById(c.document).$promise.then(function(){r.send("danger","Delete success"),o.go("app.documents.main")})["catch"](function(e){r.send("danger",e.data.error.message)})},c.saveDocument=function(){c.document.updatedAt=(new Date).toISOString(),c.document.updatedBy=i.currentUser.id,console.log(c.document),l.prototype$updateAttributes(c.document).$promise.then(p).then(function(){c.orgTags=_.cloneDeep(c.tags),r.send("success","Save success")})["catch"](function(e){r.send("danger",e.data.error.message)})}}e.$inject=["document","allTags","$state","$scope","$rootScope","Markdown","Notification","Document","Auth","Toolbar"],angular.module("app.editor").controller("EditorController",e)}.call(this),function(){"use strict";function e(e,t){e.state("app.documents",{url:"/documents",views:{content:{templateUrl:"console/main/documents/documents.template.html",controller:"DocumentsController as vm"}},resolve:{documents:["Document",function(e){return e.find({filter:{fields:{html:!1,markdown:!1},include:"author",order:"createdAt DESC"}})}]}}).state("app.documents.main",{url:"/",onEnter:["Toolbar",function(e){$(".documents-list").removeClass("split-document-list col-md-4 visible-md-block visible-lg-block"),$(".document-detail-content").removeClass("split-document-detail"),e.config({parent:{text:"Document",sref:"app.documents.main"},buttons:{text:"Add document","class":"btn-success",sref:"app.add-document"}})}]}),t.saveItem("content.documents",{name:"Document",sref:"app.documents.main",icon:"fui-document",weight:1})}e.$inject=["$stateProvider","SidebarMenuProvider"],angular.module("app.documents",[]).config(e)}.call(this),function(){"use strict";function e(e,t,o,a){var n;n=this,n.documents=e,o.fromNow=function(e){return moment(e).fromNow()},n.detail=function(e){t.go("app.documents.detail",e)},n.edit=function(e){console.log(e),t.go("app.editor",e)}}e.$inject=["documents","$state","$scope","$rootScope"],angular.module("app.documents").controller("DocumentsController",e)}.call(this),function(){"use strict";function e(e,t){e.state("app.documents.detail",{url:"/:id",views:{detail:{controller:"DocumentDetailController as vm"}},resolve:{document:["Document","$stateParams",function(e,t){return e.findById({id:t.id,filter:{fields:{markdown:!1},include:"author"}})}]}})}e.$inject=["$stateProvider","SidebarMenuProvider"],angular.module("app.document-detail",[]).config(e)}.call(this),function(){"use strict";function e(e,t,o,a,n,s,r){var l;l=this,$(".documents-list").addClass("split-document-list col-md-4 visible-md-block visible-lg-block"),$(".document-detail-content").addClass("split-document-detail"),e.$promise.then(function(){r.config({parent:{text:"Document",sref:"app.documents.main"},child:{text:e.title},buttons:{text:"Edit","class":"btn-info",disabled:!s.isAdmin()&&s.currentUser.id!==e.author.id}})}),l.document=e,o.$watch("vm.document.html",function(){n.html(l.document.html)}),r.onClick=function(){t.go("app.editor",e)},o.$on("$destroy",function(){r.onClick=function(){}})}e.$inject=["document","$state","$scope","$rootScope","$element","Auth","Toolbar"],angular.module("app.document-detail").controller("DocumentDetailController",e)}.call(this),function(){"use strict";function e(e,t){e.state("app.add-user",{url:"/add-user",views:{content:{templateUrl:"console/main/add-user/add-user.template.html",controller:"AddUserController as vm"}},onEnter:["Toolbar",function(e){return e.config({parent:{text:"User",sref:"app.users"},child:{text:"Add User"},buttons:{text:"Save","class":"btn-info"}})}]})}e.$inject=["$stateProvider","SidebarMenuProvider"],angular.module("app.add-user",[]).config(e)}.call(this),function(){"use strict";function e(e,t,o,a,n,s,r){var l,i;l=this,$("#avatar-input-modal").on("shown.bs.modal",function(){l.avatar=l.user.avatar,t.$digest()}),l.user={},t.$watch("addUserForm.$invalid",function(e){r.enableBtn(0,!e)}),r.onClick=function(){l.save()},t.$on("$destroy",function(){r.onClick=function(){}}),i=function(){return _.includes(l.user.roles,"admin")?_.includes(l.user.roles,"admin")?a.prototype$addRolesById({id:l.user.id,roleNames:["admin"]}).$promise:Promise.resolve():a.prototype$deleteRoleById({id:l.user.id,roleName:"admin"}).$promise},l.saveAvatar=function(){l.user.avatar=l.avatar},l.save=function(){t.addUserForm.$invalid||a.create(l.user).$promise.then(function(e){if(l.user.id=e.id,n.isAdmin())return i()}).then(function(){s.send("success","Save success"),e.go("app.users")})["catch"](function(e){s.send("danger",e.data.error.message)})}}e.$inject=["$state","$scope","$rootScope","User","Auth","Notification","Toolbar"],angular.module("app.add-user").controller("AddUserController",e)}.call(this),function(){"use strict";function e(e,t){e.state("app.tags.new",{url:"/new",views:{"detail@app.tags":{controller:"AddTagController as vm",templateUrl:"console/main/add-tag/add-tag.template.html"}},onEnter:["Toolbar",function(e){e.config({parent:{text:"Tag",sref:"app.tags.main"},child:{text:"new"},buttons:{text:"Save","class":"btn-success"}})}]})}e.$inject=["$stateProvider","SidebarMenuProvider"],angular.module("app.add-tag",[]).config(e)}.call(this),function(){"use strict";function e(e,t,o,a,n,s){var r,l,i;r=this,$(".tags-list").addClass("split-tag-list col-md-6 visible-md-block visible-lg-block"),$(".tag-detail-content").addClass("split-tag-detail"),r.tag={},s.onClick=function(){i()},t.$on("$destroy",function(){s.onClick=function(){}}),t.$watch("tagDetailForm.$invalid",function(e){s.enableBtn(0,!e)}),l=function(){o.$broadcast("reload")},i=function(){n.create(r.tag).$promise.then(function(t){l(),a.send("success","Save success"),e.go("app.tags.detail",t)})["catch"](function(e){a.send("danger",e.data.error.message)})},r.saveImage=function(){r.tag.image=r.image}}e.$inject=["$state","$scope","$rootScope","Notification","Tag","Toolbar"],angular.module("app.add-tag").controller("AddTagController",e)}.call(this),function(){"use strict";function e(e,t){e.state("app.add-document",{url:"/add-document",views:{"content@app":{templateUrl:"console/main/add-document/add-document.template.html",controller:"AddDocumentController as vm"}},resolve:{allTags:["Tag",function(e){return e.find({filter:{fields:{name:!0,id:!0}}})}]},onEnter:["Toolbar",function(e){e.config({input:{text:"",placeholder:"Title"},buttons:[{icon:"fui-gear","class":"btn-empty"},{text:"Save","class":"btn-info"}]})}]})}e.$inject=["$stateProvider","SidebarMenuProvider"],angular.module("app.add-document",[]).config(e)}.call(this),function(){"use strict";function e(e,t,o,a,n,s,r,l,i){var d,c,u;d=this,d.document={markdown:"",authorId:l.currentUser.id,createdAt:(new Date).toISOString(),isPage:!1,status:"draft"},d.allTags=e,o.imageTypeSwitch=!0,o.$watch("vm.document.markdown",function(){var e;e=n.render(d.document.markdown),$(".editor-html").html(e)}),i.inputChanged=function(e){d.document.title=e},i.onClick=function(e){switch(e){case 0:$("#editor-setting").collapse("toggle");break;case 1:d.saveDocument()}},o.$on("$destroy",function(){i.onClick=function(){},i.inputChanged=function(){}}),o.$watch("vm.document.title",function(e){i.enableBtn(1,!!e)}),d.saveImage=function(){d.document.image=d.image},c=function(e){return r.tags.link({id:d.document.id,fk:e},{}).$promise},u=function(){var e;return e=_.map(d.tags,c),Promise.all(e)},d.saveDocument=function(){d.document.updatedAt=(new Date).toISOString(),d.document.updatedBy=l.currentUser.id,console.log(d.document),r.prototype$updateAttributes(d.document).$promise.then(function(e){return d.document=_.extend(d.document,e),u()}).then(function(){s.send("success","Save success"),t.go("app.editor",d.document)})["catch"](function(e){s.send("danger",e.data.error.message)})}}e.$inject=["allTags","$state","$scope","$rootScope","Markdown","Notification","Document","Auth","Toolbar"],angular.module("app.add-document").controller("AddDocumentController",e)}.call(this),function(){"use strict";angular.module("app.core",["lbServices","ui.router"])}.call(this),function(){"use strict";function e(e,t,o,a){var n;n=this,e.toolbar=a.setting,e.$watch("toolbar.input.text",function(e){a.inputChanged(e)}),e.click=function(e){a.onClick(e)}}e.$inject=["$scope","$rootScope","$state","Toolbar"],angular.module("app.core").controller("ToolbarController",e)}.call(this),function(){"use strict";function e(e,t,o,a,n,s,r,l){var i;i=this,i.sidebarMenu=a.menu,i.currentUser=n.currentUser,i.blogSetting=s.currentSetting,i.render=function(){r.renderAll().then(function(){l.send("success","Render success")})["catch"](function(){l.sned("danger","Render failed")})}}e.$inject=["$scope","$rootScope","$state","SidebarMenu","Auth","BlogSetting","BlogRender","Notification"],angular.module("app.core").controller("SidebarController",e)}.call(this),function(){"use strict";function e(){var e,t;return e=function(){this.setting={}},t=function(e){var t,o,a,n;for(t=0,a=(o=_.keys(e)).length;t<a;++t)n=o[t],e.hasOwnProperty(n)&&delete e[n];return e},e.prototype.config=function(e){return e.buttons&&!_.isArray(e.buttons)&&(e.buttons=[e.buttons]),e=_.pick(e,["buttons","input","parent","child"]),t(this.setting),this.setting=_.extend(this.setting,e)},e.prototype.inputChanged=function(e){},e.prototype.onClick=function(e){},e.prototype.enableBtn=function(e,t){this.setting.buttons&&this.setting.buttons[e]&&(this.setting.buttons[e].disabled=!t)},new e}angular.module("app.core").factory("Toolbar",e)}.call(this),function(){"use strict";function e(e,t,o){var a,n,s;return a=function(){},a.prototype.send=function(e,t){var a,r,l,i;a=$('<div class="notify-wrapper"><center><p class="notify bg-'+e+" text-"+e+'">'+t+"</p><center></div>"),a.hide(0),$("body").append(a),a.show(0),s(a),r=function(){a.remove()},l=function(){s(a,500,r)},i=function(){o(l,4e3)},n(a,500,i)},n=function(e,t,o){var a;t=t||0,a=e.height(),e.animate({top:"+="+a},t,o)},s=function(e,t,o){var a;t=t||0,a=e.height(),e.animate({top:"-="+a},t,o)},new a}e.$inject=["Setting","$rootScope","$timeout"],angular.module("app.core").factory("Notification",e)}.call(this),function(){"use strict";function e(){var e;return marked.setOptions({math:function(e){var t;try{return katex.renderToString(e,{displayMode:!0})}catch(o){return t=o.message}},inlineMath:function(e){var t;try{return katex.renderToString(e,{displayMode:!1})}catch(o){return t=o.message}}}),e=function(){},e.prototype.render=function(e){return _.isEmpty(e)?"":marked(e)},new e}angular.module("app.core").factory("Markdown",e)}.call(this),function(){"use strict";function e(e,t){var o,a;return o=function(){this.currentSetting={},this.isLoaded=!1,this.getSettings()},o.prototype.getSettings=function(){var t;return t=this,t.isLoaded=!1,e.find().$promise.then(function(e){a(t.currentSetting,e),t.isLoaded=!0})["catch"](t.onError)},o.prototype.onError=function(e){throw console.error(e),e},a=function(e,t){var o,a,n;for(o=0,a=t.length;o<a;++o)n=t[o],e[n.key]=n.value;return e},new o}e.$inject=["Setting","$rootScope"],angular.module("app.core").factory("BlogSetting",e)}.call(this),function(){"use strict";function e(e,t,o){var a;return a=function(){},a.prototype.renderAll=function(){return o.send("warning","Rendering ..."),e.renderAll().$promise},new a}e.$inject=["Render","$rootScope","Notification"],angular.module("app.core").factory("BlogRender",e)}.call(this),function(){"use strict";function e(e,t,o){var a,n,s;return a=function(){this.currentUser={},this.isLogedIn=this.isLogedOut=!1},a.prototype.isAdmin=function(e){return e=e||this.currentUser,e.roles&&_.includes(e.roles,"admin")},a.prototype.getUser=function(){var o,a;return o=this,a=e.currentUserId,a?t.getCurrent({filter:{include:"roles"}}).$promise.then(function(e){o.confirmLogIn(e)})["catch"](function(e){o.onError(e)}):this.clearLogIn()},a.prototype.confirmLogIn=function(e){this.currentUser=_.extend(this.currentUser,e),this.isLogedIn=!0,this.isLogedOut=!1},a.prototype.clearLogIn=function(){e.clearUser(),e.clearStorage(),n(this.currentUser),this.isLogedIn=!1,this.isLogedOut=!0},a.prototype.logIn=function(e){var o;return o=this,_.isEmpty(this.currentUser)?t.login(e).$promise.then(function(e){o.getUser()})["catch"](function(e){o.onError(e)}):Promise.reject("already signed")},a.prototype.logOut=function(){var e;return e=this,_.isEmpty(this.currentUser)?Promise.reject("not signed"):t.logout().$promise.then(function(t){e.clearLogIn()})["catch"](function(t){e.onError(t)})},a.prototype.onError=function(e){throw this.clearLogIn(),e},n=function(e){var t,o,a,n;for(t=0,a=(o=_.keys(e)).length;t<a;++t)n=o[t],e.hasOwnProperty(n)&&delete e[n];return e},s=o.Auth=new a,s.getUser(),s}e.$inject=["LoopBackAuth","User","$rootScope"],angular.module("app.core").factory("Auth",e)}.call(this),function(){"use strict";function e(){var e,t,o;return e={},t={},o=function(e){var t;return t=_.values(e),t.forEach(function(e){e.isGroup&&(e.subMenu=o(e.subMenu))}),t.sort(function(e,t){return e.weight=e.weight||0,t.weight=t.weight||0,e.weight<t.weight?-1:e.weight>t.weight?1:0})},t.getMenu=function(){return o(e)},t.saveItem=function(t,o){var a;o.isGroup&&(o.subMenu={}),a=t.split("."),a=a.join(".subMenu."),_.set(e,a,o)},t.$get=function(){return{menu:o(e)}},t}angular.module("app.core").provider("SidebarMenu",e)}.call(this),function(){"use strict";function e(){return{restrict:"A",link:function(e,t,o){var a,n,s,r,l;a=$(o.toggleSidebar),n=$(t),$(window).off("click"),a.off("click"),n.off("click"),s=function(e){return console.log("toggle"),a.animate({width:"toggle"},400,"swing",e)},r=function(){return a.is(":visible")},l=function(){return n.is(":visible")},$(window).click(function(){r()&&l()&&s(function(){a.removeAttr("style")})}),a.click(function(e){e.stopPropagation()}),n.click(function(e){r()||s(),e.stopPropagation()})}}}angular.module("app.core").directive("toggleSidebar",e)}.call(this),function(){"use strict";function e(){return{restrict:"A",scope:{onDrop:"=",onDrag:"=",onDragStart:"="},link:function(e,t,o,a){return $(t).addClass("jquery-sortable").sortable({handle:".drag-item",onDrop:function(t,o,a){e.onDrop?e.onDrop.apply(this,arguments):a(t,o)},onDrag:function(t,o,a){e.onDrag?e.onDrag.apply(this,arguments):a(t,o)},onDragStart:function(t,o,a){e.onDragStart?e.onDragStart.apply(this,arguments):a(t,o)}})}}}angular.module("app.core").directive("sortable",e)}.call(this),function(){"use strict";function e(e){return{restrict:"A",scope:{sidebarItem:"="},link:function(t,o,a){var n,s,r,l;n=t.sidebarItem.isGroup,s=t.sidebarItem.requireAdmin,r="",l="",s&&(l=' ng-show="Auth.isAdmin(Auth.currentUser)"'),r=n?'<li class="sidebar-header"'+l+">{{ sidebarItem.name }}</li><li"+l+'><ul class="nav" ng-repeat="item in sidebarItem.subMenu" sidebar-item="item"/></ul></li>':"<li"+l+'><a href="" my-sref="sidebarItem.sref"><span class="glyphicon" ng-class="sidebarItem.icon" ng-show="sidebarItem.icon"></span>{{ sidebarItem.name }}</a></li>',o.html(r),t.Auth=t.$root.Auth,e(o.contents())(t)}}}e.$inject=["$compile"],angular.module("app.core").directive("sidebarItem",e)}.call(this),function(){"use strict";function e(){return{restrict:"A",link:function(e,t,o){$(t).hide(0),e.$watch(o.showAnimate,function(e){e?$(t).slideDown():$(t).slideUp()})}}}angular.module("app.core").directive("showAnimate",e)}.call(this),function(){"use strict";function e(){return{restrict:"A",require:"ngModel",link:function(e,t,o,a){var n;return $(t).select2({dropdownCssClass:"dropdown-inverse"}),n=function(){return a.$modelValue},e.$watch(n,function(){$(t).select2("val",a.$modelValue)}),e.$on("set select2",function(){$(t).select2("val",a.$modelValue)}),$(t).on("change",function(){var o;o=$(t).val(),e.$apply(function(){a.$setViewValue(o)})})}}}angular.module("app.core").directive("select2",e)}.call(this),function(){"use strict";function e(e){return{restrict:"A",link:function(t,o,a){if(t.$last)return e(function(){t.$emit(a.onRepeatFinish)})}}}e.$inject=["$timeout"],angular.module("app.core").directive("onRepeatFinish",e)}.call(this),function(){"use strict";function e(e){return{restrict:"A",scope:{mySref:"="},link:function(t,o,a){t.$watch("mySref",function(){var a,n,s,r,l;a=t.mySref,n=/([^\(]+)\(([^\)]*)\)|([^\(\)]+)/.exec(a),s=n[1],r=n[2],l=n[3],r&&(r=t.$root.$eval(r)),s||(s=l),a&&(o[0].onclick=function(){e.go(s,r)})})}}}e.$inject=["$state"],angular.module("app.core").directive("mySref",e)}.call(this),function(){"use strict";function e(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,o,a){o.compareTo&&(a.$validators.compareTo=function(t){return t===e.otherModelValue},e.$watch("otherModelValue",function(){a.$validate()}))}}}angular.module("app.core").directive("compareTo",e)}.call(this),function(){"use strict";function e(){return{restrict:"A",require:"ngModel",scope:{model:"=ngModel"},link:function(e,t,o,a){$(t).bootstrapSwitch(),e.$watch("model",function(){var e,o;e=$(t).bootstrapSwitch("state"),o=a.$modelValue,e!==o&&$(t).bootstrapSwitch("toggleState")}),$(t).on("switchChange.bootstrapSwitch",function(e,t){a.$setViewValue(t)})}}}angular.module("app.core").directive("bootstrapSwitch",e)}.call(this),function(){"use strict";function e(){return{restrict:"A",require:"ngModel",scope:{model:"=ngModel"},link:function(e,t,o,a){$(t).datetimepicker({sideBySide:!0,widgetParent:$("body"),widgetPositioning:{vertical:"bottom"}}),e.$watch("model",function(){var e,o,n;console.log("watch"),a.$modelValue&&(e=moment(a.$modelValue),console.log(e),o=$(t).data("DateTimePicker"),n=o.date(),n||(console.log("set"),o.date(e)))}),$(t).on("dp.show",function(){var e,o,a,n,s,r,l;e=$(t).offset(),o=$(t).outerHeight(),a=$(t).outerWidth(),n=$(".bootstrap-datetimepicker-widget").height(),s=$(".bootstrap-datetimepicker-widget").width(),r=$("body").height(),l=$("body").width(),console.log(o,a),$(".bootstrap-datetimepicker-widget").css({top:e.top+o+5,left:Math.min(e.left,l-s-15),right:"auto",bottom:"auto"})}),$(t).on("dp.change",function(e){var t;t=e.date,a.$setViewValue(t.toISOString())})}}}angular.module("app.core").directive("bootstrapDatatimepicker",e)}.call(this),function(){"use strict";angular.module("blog",["app.core","app.login","app.logout","app.users","app.add-user","app.user-detail","app.documents","app.document-detail","app.editor","app.add-document","app.tags","app.tag-detail","app.add-tag","app.setting"])}.call(this),function(){"use strict";function e(e,t,o){var a;a=this,e.$watch("Auth.isLogedOut",function(e,o){e&&t.go("login")})}e.$inject=["$scope","$state","Auth"],angular.module("blog").controller("MainController",e)}.call(this),function(){"use strict";angular.module("app.core")}.call(this),angular.module("blog").run(["$templateCache",function(e){e.put("console/core/layout/layout.template.html",'<div class="container-fluid inherit-height"><div class="row inherit-height"><div id="sidebar" ui-view="sidebar" \nclass="col-sm-3 col-md-2 sidebar"></div><div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"><div \nclass="toolbar-wrapper"><div id="toolbar" ui-view="toolbar"></div></div><div class="content-wrapper"><div id="content" \nui-view="content"></div></div></div></div></div>'),e.put("console/core/mixin/mixin.html",""),e.put("console/core/sidebar/sidebar.template.html",'<div class="container-fluid"><div class="sidebar-header"><img ng-src="{{ vm.currentUser.avatar }}" \nclass="sidebar-header-icon"><div class="sidebar-header-detail"><div class="sidebar-header-title">\n{{ vm.blogSetting.title }}</div><div class="sidebar-header-description">{{ vm.currentUser.username }}</div></div></div>\n<ul ng-repeat="item in vm.sidebarMenu" sidebar-item="item" class="nav nav-sidebar"></ul><ul class="sidebar-footer"><li \nclass="sidebar-footer-item"><a ng-click="vm.render()">refresh blog</a></li><li class="sidebar-footer-item"><a href="/">\nview blog</a></li></ul></div>'),e.put("console/core/toolbar/toolbar.template.html",'<nav class="toolbar navbar navbar-default"><div class="container-fluid"><div class="navbar-heading visible-xs-block">\n<button toggle-sidebar="#sidebar" class="pull-left btn navbar-btn show-sidebar"><span class="fui-list-bulleted"></span>\n</button></div><ul class="toolbar-status nav navbar-nav navbar-left"><li><a href="" my-sref="toolbar.parent.sref" \nng-show="toolbar.parent &amp;&amp; (!toolbar.parent.needAdmin || Auth.isAdmin())" class="toolbar-parent navbar-brand">\n{{ toolbar.parent.text }}</a></li><li><a \nng-show="toolbar.child &amp;&amp; (!toolbar.parent.needAdmin || Auth.isAdmin())" class="toolbar-arrow navbar-brand">\n<span class="fui-arrow-right"></span></a></li><li><a ng-show="toolbar.child" class="toolbar-child navbar-brand">\n{{ toolbar.child.text }}</a></li></ul><form ng-show="toolbar.input" class="toolbar-input-form navbar-form navbar-left">\n<div class="form-group"><input type="text" placeholder="{{ toolbar.input.placeholder }}" ng-model="toolbar.input.text" \nclass="toolbar-input form-control"></div></form><ul class="toolbar-buttons nav navbar-nav navbar-right"><li \nng-repeat="button in toolbar.buttons"><button ng-class="button.class" ng-disabled="button.disabled" \nng-click="click($index)" my-sref="button.sref" class="toolbar-button btn navbar-btn">{{ button.text }}<span \nng-class="button.icon"></span></button></li></ul></div></nav>'),
e.put("console/main/add-document/add-document.template.html",'<div id="image-input-modal" tabindex="-1" role="dialog" class="modal"><div class="vertical-alignment-helper"><div \nclass="modal-dialog vertical-align-center"><div class="modal-content"><div class="modal-body"><div \nng-show="imageTypeSwitch" class="no-padding"><input type="text" placeholder="image url" ng-model="vm.image" \nautofocus="autofocus" class="form-control"></div></div><div class="modal-footer"><div class="pull-left"><input \nchecked="checked" type="checkbox" data-toggle="switch" data-on-text="Link" data-off-text="File" data-on-color="info" \nbootstrap-switch="bootstrap-switch" ng-model="imageTypeSwitch"></div><button type="button" data-dismiss="modal" \nclass="btn btn-default">Close</button> <button type="button" data-dismiss="modal" ng-click="vm.saveImage()" \nclass="btn btn-info">Save</button></div></div></div></div></div><div id="editor-setting" class="collapse col-xs-12">\n<form name="addDocumentForm" class="form-horizontal"><div class="form-group"><div \nng-class="{\'has-error\': addDocumentForm.url.$invalid &amp;&amp; addDocumentForm.url.$dirty}" \nclass="split-form-group col-xs-12 col-md-6"><label for="url" class="col-sm-2 control-label">Url</label><div \nclass="col-sm-10"><input id="url" name="url" type="text" placeholder="Url" pattern="[a-z0-9-]*" \nng-model="vm.document.url" required="required" class="form-control"></div></div><div \nng-class="{\'has-error\': addDocumentForm.date.$invalid &amp;&amp; addDocumentForm.date.$dirty}" \nclass="split-form-group col-xs-12 col-md-6"><label for="date" class="col-sm-2 control-label">Date</label><div \nclass="col-sm-10"><input id="date" name="date" type="text" placeholder="create date" \nbootstrap-datatimepicker="bootstrap-datatimepicker" ng-model="vm.document.createdAt" required="required" \nclass="form-control"></div></div></div><div class="form-group"><div class="split-form-group col-xs-12"><label \nfor="image" class="col-sm-2 col-md-1 control-label">Image</label><div class="col-sm-10 col-md-11"><div id="image" \nclass="no-padding img-thumbnail"><div data-toggle="modal" data-target="#image-input-modal" class="overlay"></div><img \nng-show="vm.document.image" ng-src="{{ vm.document.image }}" class="img-responsive"></div></div></div></div><div \nclass="form-group"><div class="split-form-group col-xs-12"><label for="tags" class="col-sm-2 col-md-1 control-label">\nTags</label><div class="col-sm-10 col-md-11"><select id="tags" select2="select2" multiple="multiple" \nng-model="vm.tags" class="form-control multiselect multiselect-default"><option ng-repeat="tag in vm.allTags" \nvalue="{{ tag.id }}" on-repeat-finish="set select2">{{ tag.name }}</option></select></div></div></div><div \nclass="form-group"><div class="split-form-group col-xs-12 col-md-6"><label for="page" class="col-sm-2 control-label">\nPage</label><div class="col-sm-10"><div class="pull-left"><input id="page" type="checkbox" data-toggle="switch" \ndata-on-color="info" bootstrap-switch="bootstrap-switch" ng-model="vm.document.isPage"></div></div></div><div \nclass="split-form-group col-xs-12 col-md-6"><label for="status" class="col-sm-2 control-label">Status</label><div \nclass="col-sm-10"><select select2="select2" ng-model="vm.document.status" class="form-control select"><option \nvalue="published">Published</option><option value="draft">Draft</option></select></div></div></div></form></div><div \nclass="editor-markdown col-xs-12 col-md-6"><textarea ng-model="vm.document.markdown"></textarea></div><div \nclass="editor-html markdown col-md-6 visible-md-block visible-lg-block"></div>'),e.put("console/main/add-tag/add-tag.template.html",'<div id="image-input-modal" tabindex="-1" role="dialog" class="modal"><div class="vertical-alignment-helper"><div \nclass="modal-dialog vertical-align-center"><div class="modal-content"><div class="modal-body"><div \nng-show="imageTypeSwitch" class="no-padding"><input type="text" placeholder="image url" ng-model="vm.image" \nautofocus="autofocus" class="form-control"></div></div><div class="modal-footer"><div class="pull-left"><input \nchecked="checked" type="checkbox" data-toggle="switch" data-on-text="Link" data-off-text="File" data-on-color="info" \nbootstrap-switch="bootstrap-switch" ng-model="imageTypeSwitch"></div><button type="button" data-dismiss="modal" \nclass="btn btn-default">Close</button> <button type="button" data-dismiss="modal" ng-click="vm.saveImage()" \nclass="btn btn-info">Save</button></div></div></div></div></div><form id="tag-detail" name="tagDetailForm" \nclass="form-horizontal"><div class="form-group"><label for="image" class="control-label">Image</label><div id="image" \nclass="col-xs-12 no-padding img-thumbnail"><div data-toggle="modal" data-target="#image-input-modal" class="overlay">\n</div><img ng-show="vm.tag.image" ng-src="{{ vm.tag.image }}" class="img-responsive"></div></div><div \nng-class="{\'has-error\': tagDetailForm.name.$invalid &amp;&amp; tagDetailForm.name.$dirty}" class="form-group"><label \nfor="name" class="control-label">Name</label><input id="name" name="name" type="text" placeholder="Name" \nng-model="vm.tag.name" required="required" class="form-control"></div><div \nng-class="{\'has-error\': tagDetailForm.url.$invalid &amp;&amp; tagDetailForm.url.$dirty}" class="form-group"><label \nfor="url" class="control-label">Url</label><input id="url" name="url" type="text" placeholder="Url" \npattern="[a-z0-9-]*" ng-model="vm.tag.url" required="required" class="form-control"></div><div class="form-group">\n<label for="description" class="control-label">Description</label><textarea id="description" name="description" \ntype="text" placeholder="Description" ng-model="vm.tag.description" rows="4" class="form-control"></textarea></div>\n</form>'),e.put("console/main/add-user/add-user.template.html",'<div class="add-user"><form name="addUserForm" class="form-horizontal"><div class="form-group"><div \nclass="col-xs-4 col-sm-5"><hr></div><center class="col-xs-4 col-sm-2"><p class="text-muted">basic info</p></center><div\n class="col-xs-4 col-sm-5"><hr></div></div><div class="form-group"><label for="avatar" class="col-sm-2 control-label">\nAvatar</label><div class="col-sm-9"><div id="avatar" class="no-padding img-thumbnail"><div data-toggle="modal" \ndata-target="#avatar-input-modal" class="overlay"></div><img ng-show="vm.user.avatar" ng-src="{{ vm.user.avatar }}" \nclass="img-responsive"><span ng-hide="vm.user.avatar" class="fui-user default-avatar"></span></div></div><div \nid="avatar-input-modal" tabindex="-1" role="dialog" class="modal"><div class="vertical-alignment-helper"><div \nclass="modal-dialog vertical-align-center"><div class="modal-content"><div class="modal-body"><div \nng-show="vm.avatarTypeSwitch" class="no-padding"><input type="text" placeholder="avatar url" ng-model="vm.avatar" \nclass="form-control"></div></div><div class="modal-footer"><div class="pull-left"><input checked="checked" \ntype="checkbox" data-toggle="switch" data-on-text="link" data-off-text="file" data-on-color="info" \nbootstrap-switch="bootstrap-switch" ng-model="vm.avatarTypeSwitch"></div><button type="button" data-dismiss="modal" \nclass="btn btn-default">Close</button> <button type="button" data-dismiss="modal" ng-click="vm.saveAvatar()" \nclass="btn btn-info">Save</button></div></div></div></div></div></div><div \nng-class="{\'has-error\': addUserForm.username.$invalid &amp;&amp; addUserForm.username.$dirty}" class="form-group">\n<label for="username" class="col-sm-2 control-label">Username</label><div class="col-sm-9"><input id="username" \nname="username" type="text" placeholder="user name" ng-model="vm.user.username" required="required" \nclass="form-control"><div show-animate="addUserForm.username.$invalid &amp;&amp; addUserForm.username.$dirty"><span \nclass="has-error control-label">Username is required</span></div></div></div><div \nng-class="{\'has-error\': addUserForm.realm.$invalid &amp;&amp; addUserForm.realm.$dirty}" class="form-group"><label \nfor="realm" class="col-sm-2 control-label">Real name</label><div class="col-sm-9"><input id="realm" name="realm" \ntype="text" placeholder="real name" ng-model="vm.user.realm" class="form-control"></div></div><div \nng-class="{\'has-error\': addUserForm.email.$invalid &amp;&amp; addUserForm.email.$dirty}" class="form-group"><label \nfor="email" class="col-sm-2 control-label">Email</label><div class="col-sm-9"><input id="email" name="email" \ntype="text" placeholder="email" pattern="^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$" ng-model="vm.user.email" \nrequired="required" class="form-control"><div \nshow-animate="addUserForm.email.$invalid &amp;&amp; addUserForm.email.$dirty"><span class="has-error control-label">\nPlease input a valid email address</span></div></div></div><div class="form-group"><div class="col-xs-4 col-sm-5"><hr>\n</div><center class="col-xs-4 col-sm-2"><p class="text-muted">role</p></center><div class="col-xs-4 col-sm-5"><hr>\n</div></div><div class="form-group"><label for="role" class="col-sm-2 control-label">Role</label><div class="col-sm-9">\n<select id="role" select2="vm.user.roles" multiple="multiple" ng-model="vm.user.roles" \nclass="form-control multiselect multiselect-default"><option value="admin">admin</option></select></div></div><div \nclass="form-group"><div class="col-xs-4 col-sm-5"><hr></div><center class="col-xs-4 col-sm-2"><p class="text-muted">\npassword</p></center><div class="col-xs-4 col-sm-5"><hr></div></div><div \nng-class="{\'has-error\': addUserForm.rpassword.$invalid &amp;&amp; addUserForm.rpassword.$dirty}" class="form-group">\n<label for="pwd" class="col-sm-2 control-label">Password</label><div class="col-sm-9"><input id="pwd" name="password" \ntype="password" placeholder="new password" ng-model="vm.user.password" required="required" class="form-control"><div \nshow-animate="addUserForm.password.$invalid &amp;&amp; addUserForm.password.$dirty"><span \nclass="has-error control-label">Password is required</span></div><br><input name="rpassword" type="password" \nplaceholder="repeat password" ng-model="vm.rpassword" compare-to="vm.user.password" class="form-control"><div \nshow-animate="addUserForm.rpassword.$invalid &amp;&amp; addUserForm.rpassword.$dirty"><span \nclass="has-error control-label">Password must be the same</span></div></div></div></form></div>'),e.put("console/main/documents/documents.template.html",'<div class="list-group documents-list"><a href="#" ng-repeat="document in vm.documents" ng-click="vm.detail(document)" \nng-dblclick="vm.edit(document)" class="list-group-item"><h6 class="document-name"><span \nng-show="document.status === \'draft\'" class="document-type document-type-draft">Draft</span><span \nng-show="document.status === \'published\' &amp;&amp; !document.isPage" class="document-type document-type-post">Post\n</span><span ng-show="document.status === \'published\' &amp;&amp; document.isPage" \nclass="document-type document-type-page">Page</span>{{ document.title }}</h6><p class="document-detail"><span \nclass="document-author">{{ document.author.username }}</span><span class="document-created">\n{{ fromNow(document.createdAt) }}</span></p></a></div><div ui-view="detail" \nclass="document-detail-content markdown col-md-8"></div>'),e.put("console/main/editor/editor.template.html",'<div id="delete-check-modal" tabindex="-1" role="dialog" class="modal"><div class="vertical-alignment-helper"><div \nclass="modal-dialog vertical-align-center"><div class="modal-content"><div class="modal-header"><h4 \nclass="text-danger">Are you sure to delete this document?</h4></div><div class="modal-body"><p>\nthis action can\'t be recovered.</p></div><div class="modal-footer"><button type="button" data-dismiss="modal" \nclass="btn btn-default">Cancel</button> <button type="button" data-dismiss="modal" ng-click="vm.deleteDocument()" \nclass="btn btn-danger">Delete</button></div></div></div></div></div><div id="image-input-modal" tabindex="-1" \nrole="dialog" class="modal"><div class="vertical-alignment-helper"><div class="modal-dialog vertical-align-center"><div\n class="modal-content"><div class="modal-body"><div ng-show="imageTypeSwitch" class="no-padding"><input type="text" \nplaceholder="image url" ng-model="vm.image" autofocus="autofocus" class="form-control"></div></div><div \nclass="modal-footer"><div class="pull-left"><input checked="checked" type="checkbox" data-toggle="switch" \ndata-on-text="Link" data-off-text="File" data-on-color="info" bootstrap-switch="bootstrap-switch" \nng-model="imageTypeSwitch"></div><button type="button" data-dismiss="modal" class="btn btn-default">Close</button> \n<button type="button" data-dismiss="modal" ng-click="vm.saveImage()" class="btn btn-info">Save</button></div></div>\n</div></div></div><div id="editor-setting" class="collapse col-xs-12"><form name="editorSettingForm" \nclass="form-horizontal"><div class="form-group"><div \nng-class="{\'has-error\': editorSettingForm.url.$invalid &amp;&amp; editorSettingForm.url.$dirty}" \nclass="split-form-group col-xs-12 col-md-6"><label for="url" class="col-sm-2 control-label">Url</label><div \nclass="col-sm-10"><input id="url" name="url" type="text" placeholder="Url" pattern="[a-z0-9-]*" \nng-model="vm.document.url" required="required" class="form-control"></div></div><div \nng-class="{\'has-error\': editorSettingForm.date.$invalid &amp;&amp; editorSettingForm.date.$dirty}" \nclass="split-form-group col-xs-12 col-md-6"><label for="date" class="col-sm-2 control-label">Date</label><div \nclass="col-sm-10"><input id="date" name="date" type="text" placeholder="create date" \nbootstrap-datatimepicker="bootstrap-datatimepicker" ng-model="vm.document.createdAt" required="required" \nclass="form-control"></div></div></div><div class="form-group"><div class="split-form-group col-xs-12"><label \nfor="image" class="col-sm-2 col-md-1 control-label">Image</label><div class="col-sm-10 col-md-11"><div id="image" \nclass="no-padding img-thumbnail"><div data-toggle="modal" data-target="#image-input-modal" class="overlay"></div><img \nng-show="vm.document.image" ng-src="{{ vm.document.image }}" class="img-responsive"></div></div></div></div><div \nclass="form-group"><div class="split-form-group col-xs-12"><label for="tags" class="col-sm-2 col-md-1 control-label">\nTags</label><div class="col-sm-10 col-md-11"><select id="tags" select2="select2" multiple="multiple" \nng-model="vm.tags" class="form-control multiselect multiselect-default"><option ng-repeat="tag in vm.allTags" \nvalue="{{ tag.id }}" on-repeat-finish="set select2">{{ tag.name }}</option></select></div></div></div><div \nclass="form-group"><div class="split-form-group col-xs-12 col-md-6"><label for="page" class="col-sm-2 control-label">\nPage</label><div class="col-sm-10"><div class="pull-left"><input id="page" type="checkbox" data-toggle="switch" \ndata-on-color="info" bootstrap-switch="bootstrap-switch" ng-model="vm.document.isPage"></div></div></div><div \nclass="split-form-group col-xs-12 col-md-6"><label for="status" class="col-sm-2 control-label">Status</label><div \nclass="col-sm-10"><select select2="select2" ng-model="vm.document.status" class="form-control select"><option \nvalue="published">Published</option><option value="draft">Draft</option></select></div></div></div><div \nclass="form-group"><div class="split-form-group col-xs-12"><label for="delete" class="col-sm-2 col-md-1 control-label">\nDelete</label><div class="col-sm-10 col-md-11"><button data-toggle="modal" data-target="#delete-check-modal" \nclass="btn btn-block btn-danger">Delete Document</button></div></div></div></form></div><div \nclass="editor-markdown col-xs-12 col-md-6"><textarea ng-model="vm.document.markdown"></textarea></div><div \nclass="editor-html markdown col-md-6 visible-md-block visible-lg-block"></div>'),e.put("console/main/login/login.template.html",'<div id="login"><div class="wrapper"><form name="loginForm" novalidate="novalidate" ng-submit="vm.login()" \nclass="login-form"><div ng-class="{\'has-error\': loginForm.password.$invalid}" class="form-group"><input \nid="login-email" name="emailOrUsername" type="text" ng-model="vm.emailOrUsername" \nplaceholder="Enter Email or Username" class="form-control"><label for="login-email" class="fui-user login-field-icon">\n</label></div><div ng-class="{\'has-error\': loginForm.password.$invalid}" class="form-group"><input id="login-pass" \nname="password" type="password" ng-model="vm.loginUser.password" placeholder="Password" class="form-control"><label \nfor="login-pass" class="fui-lock login-field-icon"></label><div show-animate="loginForm.password.$invalid"><span \nclass="has-error control-label">Wrong password.</span></div></div><button class="btn btn-primary btn-lg btn-block">\nLog in</button></form></div></div>'),e.put("console/main/setting/setting.template.html",'<div id="logo-input-modal" tabindex="-1" role="dialog" class="modal"><div class="vertical-alignment-helper"><div \nclass="modal-dialog vertical-align-center"><div class="modal-content"><div class="modal-body"><div \nng-show="imageTypeSwitch" class="no-padding"><input type="text" placeholder="logo url" ng-model="vm.logo" \nautofocus="autofocus" class="form-control"></div></div><div class="modal-footer"><div class="pull-left"><input \nchecked="checked" type="checkbox" data-toggle="switch" data-on-text="Link" data-off-text="File" data-on-color="info" \nbootstrap-switch="bootstrap-switch" ng-model="imageTypeSwitch"></div><button type="button" data-dismiss="modal" \nclass="btn btn-default">Close</button> <button type="button" data-dismiss="modal" ng-click="vm.saveLogo()" \nclass="btn btn-info">Save</button></div></div></div></div></div><div id="cover-input-modal" tabindex="-1" \nrole="dialog" class="modal"><div class="vertical-alignment-helper"><div class="modal-dialog vertical-align-center"><div\n class="modal-content"><div class="modal-body"><div ng-show="imageTypeSwitch" class="no-padding"><input type="text" \nplaceholder="cover url" ng-model="vm.cover" autofocus="autofocus" class="form-control"></div></div><div \nclass="modal-footer"><div class="pull-left"><input checked="checked" type="checkbox" data-toggle="switch" \ndata-on-text="Link" data-off-text="File" data-on-color="info" bootstrap-switch="bootstrap-switch" \nng-model="imageTypeSwitch"></div><button type="button" data-dismiss="modal" class="btn btn-default">Close</button> \n<button type="button" data-dismiss="modal" ng-click="vm.saveCover()" class="btn btn-info">Save</button></div></div>\n</div></div></div><form id="setting-form" name="settingForm" class="form-horizontal"><div \nng-class="{\'has-error\': settingForm.title.$invalid &amp;&amp; settingForm.title.$dirty}" class="form-group"><label \nfor="title" class="col-sm-2 control-label">Blog Title</label><div class="col-sm-10"><input id="title" name="title" \ntype="text" placeholder="Title" ng-model="vm.setting.title" required="required" class="form-control"><label \nclass="text-muted control-label">The name of your blog</label></div></div><div class="form-group"><label \nfor="description" class="col-sm-2 control-label">Blog Description</label><div class="col-sm-10"><textarea \nid="description" name="description" type="text" placeholder="Description" ng-model="vm.setting.description" rows="5" \nclass="form-control"></textarea><label class="text-muted control-label">Describe what your blog is about</label></div>\n</div><div class="form-group"><label for="logo" class="col-sm-2 control-label">Blog logo</label><div class="col-sm-10">\n<div id="logo" class="no-padding img-thumbnail"><div data-toggle="modal" data-target="#logo-input-modal" \nclass="overlay"></div><img ng-show="vm.setting.logo" ng-src="{{ vm.setting.logo }}" class="img-responsive"></div><label\n class="text-muted control-label">Display a logo for your publication</label></div></div><div class="form-group"><label\n for="cover" class="col-sm-2 control-label">Blog Cover</label><div class="col-sm-10"><div id="cover" \nclass="no-padding img-thumbnail"><div data-toggle="modal" data-target="#cover-input-modal" class="overlay"></div><img \nng-show="vm.setting.cover" ng-src="{{ vm.setting.cover }}" class="img-responsive"></div><label \nclass="text-muted control-label">Display a cover image on your site</label></div></div><div \nng-class="{\'has-error\': settingForm.postsPerPage.$invalid &amp;&amp; settingForm.postsPerPage.$dirty}" \nclass="form-group"><label for="posts-per-page" class="col-sm-2 control-label">Post per page</label><div \nclass="col-sm-10"><input id="posts-per-page" name="postsPerPage" type="number" min="0" max="100" step="1" \nplaceholder="Post per page" ng-model="vm.setting.postsPerPage" class="form-control"><label \nclass="text-muted control-label">How many posts should be displayed on each page</label></div></div><div \nclass="form-group"><label for="navigation" class="col-sm-2 control-label">Navigation</label><div class="col-sm-10"><ul \nid="navigation" sortable="sortable" on-drop="vm.onDrop" on-drag-start="vm.onDragStart" class="no-padding"><li \nng-repeat="item in vm.setting.navigation" class="navigation-item"><div class="col-xs-1"><center><span \nclass="text-muted fui-list drag-item"></span></center></div><div class="col-xs-3"><input ng-model="item.label" \nclass="form-control"></div><div class="col-xs-7"><input ng-model="item.url" class="form-control"></div><div \nclass="col-xs-1"><button ng-click="vm.deleteNavigationItem(item)" class="btn btn-block btn-clear"><span \nclass="text-danger fui-trash"></span></button></div></li></ul><button ng-click="vm.addNavigationItem()" \nclass="btn btn-success">Add</button></div></div></form>'),e.put("console/main/tag-detail/tag-detail.template.html",'<div id="deleteCheckModal" tabindex="-1" role="dialog" class="modal"><div class="vertical-alignment-helper"><div \nclass="modal-dialog vertical-align-center"><div class="modal-content"><div class="modal-header"><h4 \nclass="text-danger">Are you sure to delete this tag?</h4></div><div class="modal-body"><p>\nthis action can\'t be recovered.</p></div><div class="modal-footer"><button type="button" data-dismiss="modal" \nclass="btn btn-default">Cancel</button> <button type="button" data-dismiss="modal" ng-click="vm.deleteTag()" \nclass="btn btn-danger">Delete</button></div></div></div></div></div><div id="image-input-modal" tabindex="-1" \nrole="dialog" class="modal"><div class="vertical-alignment-helper"><div class="modal-dialog vertical-align-center"><div\n class="modal-content"><div class="modal-body"><div ng-show="imageTypeSwitch" class="no-padding"><input type="text" \nplaceholder="image url" ng-model="vm.image" autofocus="autofocus" class="form-control"></div></div><div \nclass="modal-footer"><div class="pull-left"><input checked="checked" type="checkbox" data-toggle="switch" \ndata-on-text="Link" data-off-text="File" data-on-color="info" bootstrap-switch="bootstrap-switch" \nng-model="imageTypeSwitch"></div><button type="button" data-dismiss="modal" class="btn btn-default">Close</button> \n<button type="button" data-dismiss="modal" ng-click="vm.saveImage()" class="btn btn-info">Save</button></div></div>\n</div></div></div><form id="tag-detail" name="tagDetailForm" class="form-horizontal"><div class="form-group"><label \nfor="image" class="control-label">Image</label><div id="image" class="col-xs-12 no-padding img-thumbnail"><div \ndata-toggle="modal" data-target="#image-input-modal" class="overlay"></div><img ng-show="vm.tag.image" \nng-src="{{ vm.tag.image }}" class="img-responsive"></div></div><div \nng-class="{\'has-error\': tagDetailForm.name.$invalid &amp;&amp; tagDetailForm.name.$dirty}" class="form-group"><label \nfor="name" class="control-label">Name</label><input id="name" name="name" type="text" placeholder="Name" \nng-model="vm.tag.name" required="required" class="form-control"></div><div \nng-class="{\'has-error\': tagDetailForm.url.$invalid &amp;&amp; tagDetailForm.url.$dirty}" class="form-group"><label \nfor="url" class="control-label">Url</label><input id="url" name="url" type="text" placeholder="Url" \npattern="[a-z0-9-]*" ng-model="vm.tag.url" required="required" class="form-control"></div><div class="form-group">\n<label for="description" class="control-label">Description</label><textarea id="description" name="description" \ntype="text" placeholder="Description" ng-model="vm.tag.description" rows="4" class="form-control"></textarea></div><div\n class="form-group"><label for="delete" class="control-lable">Delete</label><button data-toggle="modal" \ndata-target="#deleteCheckModal" class="btn btn-block btn-danger">Delete Tag</button></div></form>'),e.put("console/main/tags/tags.template.html",'<div class="list-group tags-list"><a href="#" ng-repeat="tag in vm.tags" ng-click="vm.detail(tag)" \nclass="list-group-item"><p class="tag-document-count">{{ tag.documents.length }}</p><h6 class="tag-name">{{ tag.name }}\n</h6><p class="tag-detail"><span class="tag-url">/{{ tag.url }}</span></p></a></div><div ui-view="detail" \nclass="tag-detail-content col-md-6"></div>'),e.put("console/main/user-detail/user-detail.template.html",'<div class="user-detail"><form name="userDetailForm" class="form-horizontal"><div class="form-group"><div \nclass="col-xs-4 col-sm-5"><hr></div><center class="col-xs-4 col-sm-2"><p class="text-muted">basic info</p></center><div\n class="col-xs-4 col-sm-5"><hr></div></div><div class="form-group"><label for="avatar" class="col-sm-2 control-label">\nAvatar</label><div class="col-sm-9"><div id="avatar" class="no-padding img-thumbnail"><div data-toggle="modal" \ndata-target="#avatar-input-modal" class="overlay"></div><img ng-show="vm.user.avatar" ng-src="{{ vm.user.avatar }}" \nclass="img-responsive"><span ng-hide="vm.user.avatar" class="fui-user default-avatar"></span></div></div><div \nid="avatar-input-modal" tabindex="-1" role="dialog" class="modal"><div class="vertical-alignment-helper"><div \nclass="modal-dialog vertical-align-center"><div class="modal-content"><div class="modal-body"><div \nng-show="avatarTypeSwitch" class="no-padding"><input type="text" placeholder="avatar url" ng-model="vm.avatar" \nclass="form-control"></div></div><div class="modal-footer"><div class="pull-left"><input checked="checked" \ntype="checkbox" data-toggle="switch" data-on-text="link" data-off-text="file" data-on-color="info" \nbootstrap-switch="bootstrap-switch" ng-model="avatarTypeSwitch"></div><button type="button" data-dismiss="modal" \nclass="btn btn-default">Close</button> <button type="button" data-dismiss="modal" ng-click="vm.saveAvatar()" \nclass="btn btn-info">Save</button></div></div></div></div></div></div><div \nng-class="{\'has-error\': userDetailForm.username.$invalid &amp;&amp; userDetailForm.username.$dirty}" \nclass="form-group"><label for="username" class="col-sm-2 control-label">Username</label><div class="col-sm-9"><input \nid="username" name="username" type="text" placeholder="user name" ng-model="vm.user.username" required="required" \nclass="form-control"><div show-animate="userDetailForm.username.$invalid &amp;&amp; userDetailForm.username.$dirty">\n<span class="has-error control-label">Username is required</span></div></div></div><div \nng-class="{\'has-error\': userDetailForm.realm.$invalid &amp;&amp; userDetailForm.realm.$dirty}" class="form-group">\n<label for="realm" class="col-sm-2 control-label">Real name</label><div class="col-sm-9"><input id="realm" \nname="realm" type="text" placeholder="real name" ng-model="vm.user.realm" class="form-control"></div></div><div \nng-class="{\'has-error\': userDetailForm.email.$invalid &amp;&amp; userDetailForm.email.$dirty}" class="form-group">\n<label for="email" class="col-sm-2 control-label">Email</label><div class="col-sm-9"><input id="email" name="email" \ntype="text" placeholder="email" pattern="^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$" ng-model="vm.user.email" \nrequired="required" class="form-control"><div \nshow-animate="userDetailForm.email.$invalid &amp;&amp; userDetailForm.email.$dirty"><span \nclass="has-error control-label">Please input a valid email address</span></div></div></div><div \nng-show="Auth.isAdmin()"><div class="form-group"><div class="col-xs-4 col-sm-5"><hr></div><center \nclass="col-xs-4 col-sm-2"><p class="text-muted">role</p></center><div class="col-xs-4 col-sm-5"><hr></div></div><div \nclass="form-group"><label for="role" class="col-sm-2 control-label">Role</label><div class="col-sm-9"><select \nid="role" select2="vm.user.roles" multiple="multiple" ng-model="vm.user.roles" \nclass="form-control multiselect multiselect-default"><option value="admin">admin</option></select></div></div></div>\n<div class="form-group"><div class="col-xs-4 col-sm-5"><hr></div><center class="col-xs-4 col-sm-2"><p \nclass="text-muted">password</p></center><div class="col-xs-4 col-sm-5"><hr></div></div><div \nng-class="{\'has-error\': userDetailForm.rpassword.$invalid &amp;&amp; userDetailForm.rpassword.$dirty}" \nclass="form-group"><label for="pwd" class="col-sm-2 control-label">Password</label><div class="col-sm-9"><input \nid="pwd" name="password" type="password" placeholder="new password" ng-model="vm.user.password" class="form-control">\n<br><input name="rpassword" type="password" placeholder="repeat password" ng-model="vm.rpassword" \ncompare-to="vm.user.password" class="form-control"><div \nshow-animate="userDetailForm.rpassword.$invalid &amp;&amp; userDetailForm.rpassword.$dirty"><span \nclass="has-error control-label">Password must be the same</span></div></div></div></form><form name="deleteForm" \nng-show="Auth.isAdmin()" class="form-horizontal has-error"><div class="form-group"><div class="col-xs-4 col-sm-5"><hr>\n</div><center class="col-xs-4 col-sm-2"><p class="text-muted">delete</p></center><div class="col-xs-4 col-sm-5"><hr>\n</div></div><div ng-class="{\'has-error\': deleteForm.deleteName.$invalid &amp;&amp; deleteForm.deleteName.$dirty}" \nclass="form-group"><label for="deleteName" class="col-sm-2 control-label">Delete User</label><div class="col-sm-9">\n<input id="deleteName" name="deleteName" type="text" placeholder="input user name to delete" ng-model="vm.deleteName" \ncompare-to="vm.user.username" class="form-control"><div show-animate="!deleteForm.deleteName.$invalid"><span \nclass="control-label">Delete action can\'t be recovered</span> <button ng-disabled="deleteForm.deleteName.$invalid" \nng-click="vm.delete()" class="btn btn-block btn-danger">Delete</button></div></div></div></form></div>'),e.put("console/main/users/users.template.html",'<div class="list-group user-list-group"><a href="#" ng-repeat="user in vm.users" ui-sref="app.user-detail(user)" \nclass="list-group-item"><image ng-src="{{ user.avatar }}" class="user-avatar"></image><span \nng-repeat="role in user.roles" class="user-role">{{ role }}</span><h6 class="user-name">{{ user.username }}</h6><p \nclass="user-email">{{ user.email }}</p></a></div>')}]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="lbServices"),function(e,t,o){"use strict";function a(e){var t=e.match(/^(?:https?:)?\/\/([^\/]+)/);return t?t[1]:null}var n="/api",s="authorization",r=a(n)||location.host,l=t.module("lbServices",["ngResource"]);l.factory("Document",["LoopBackResource","LoopBackAuth","$injector",function(e,t,o){var a=e(n+"/documents/:id",{id:"@id"},{prototype$__findById__tags:{params:{fk:"@fk"},url:n+"/documents/:id/tags/:fk",method:"GET"},prototype$__destroyById__tags:{params:{fk:"@fk"},url:n+"/documents/:id/tags/:fk",method:"DELETE"},prototype$__updateById__tags:{params:{fk:"@fk"},url:n+"/documents/:id/tags/:fk",method:"PUT"},prototype$__link__tags:{params:{fk:"@fk"},url:n+"/documents/:id/tags/rel/:fk",method:"PUT"},prototype$__unlink__tags:{params:{fk:"@fk"},url:n+"/documents/:id/tags/rel/:fk",method:"DELETE"},prototype$__exists__tags:{params:{fk:"@fk"},url:n+"/documents/:id/tags/rel/:fk",method:"HEAD"},prototype$__get__author:{url:n+"/documents/:id/author",
method:"GET"},prototype$__get__updater:{url:n+"/documents/:id/updater",method:"GET"},prototype$__get__tags:{isArray:!0,url:n+"/documents/:id/tags",method:"GET"},prototype$__create__tags:{url:n+"/documents/:id/tags",method:"POST"},prototype$__count__tags:{url:n+"/documents/:id/tags/count",method:"GET"},create:{url:n+"/documents",method:"POST"},createMany:{isArray:!0,url:n+"/documents",method:"POST"},upsert:{url:n+"/documents",method:"PUT"},exists:{url:n+"/documents/:id/exists",method:"GET"},findById:{url:n+"/documents/:id",method:"GET"},find:{isArray:!0,url:n+"/documents",method:"GET"},findOne:{url:n+"/documents/findOne",method:"GET"},updateAll:{url:n+"/documents/update",method:"POST"},deleteById:{url:n+"/documents/:id",method:"DELETE"},count:{url:n+"/documents/count",method:"GET"},prototype$updateAttributes:{url:n+"/documents/:id",method:"PUT"},findByUrl:{url:n+"/documents/url/:url",method:"GET"},"::exists::Tag::documents":{params:{fk:"@fk"},url:n+"/tags/:id/documents/rel/:fk",method:"HEAD"},"::get::Tag::documents":{isArray:!0,url:n+"/tags/:id/documents",method:"GET"},"::count::Tag::documents":{url:n+"/tags/:id/documents/count",method:"GET"},"::findById::User::documents":{params:{fk:"@fk"},url:n+"/users/:id/documents/:fk",method:"GET"},"::destroyById::User::documents":{params:{fk:"@fk"},url:n+"/users/:id/documents/:fk",method:"DELETE"},"::updateById::User::documents":{params:{fk:"@fk"},url:n+"/users/:id/documents/:fk",method:"PUT"},"::get::User::documents":{isArray:!0,url:n+"/users/:id/documents",method:"GET"},"::create::User::documents":{url:n+"/users/:id/documents",method:"POST"},"::createMany::User::documents":{isArray:!0,url:n+"/users/:id/documents",method:"POST"},"::delete::User::documents":{url:n+"/users/:id/documents",method:"DELETE"},"::count::User::documents":{url:n+"/users/:id/documents/count",method:"GET"}});return a.updateOrCreate=a.upsert,a.update=a.updateAll,a.destroyById=a.deleteById,a.removeById=a.deleteById,a.modelName="Document",a.tags=function(){var e=o.get("Tag"),t=e["::get::Document::tags"];return t.apply(a,arguments)},a.tags.count=function(){var e=o.get("Tag"),t=e["::count::Document::tags"];return t.apply(a,arguments)},a.tags.create=function(){var e=o.get("Tag"),t=e["::create::Document::tags"];return t.apply(a,arguments)},a.tags.createMany=function(){var e=o.get("Tag"),t=e["::createMany::Document::tags"];return t.apply(a,arguments)},a.tags.destroyById=function(){var e=o.get("Tag"),t=e["::destroyById::Document::tags"];return t.apply(a,arguments)},a.tags.exists=function(){var e=o.get("Tag"),t=e["::exists::Document::tags"];return t.apply(a,arguments)},a.tags.findById=function(){var e=o.get("Tag"),t=e["::findById::Document::tags"];return t.apply(a,arguments)},a.tags.link=function(){var e=o.get("Tag"),t=e["::link::Document::tags"];return t.apply(a,arguments)},a.tags.unlink=function(){var e=o.get("Tag"),t=e["::unlink::Document::tags"];return t.apply(a,arguments)},a.tags.updateById=function(){var e=o.get("Tag"),t=e["::updateById::Document::tags"];return t.apply(a,arguments)},a.author=function(){var e=o.get("User"),t=e["::get::Document::author"];return t.apply(a,arguments)},a.updater=function(){var e=o.get("User"),t=e["::get::Document::updater"];return t.apply(a,arguments)},a}]),l.factory("Tag",["LoopBackResource","LoopBackAuth","$injector",function(e,t,o){var a=e(n+"/tags/:id",{id:"@id"},{prototype$__exists__documents:{params:{fk:"@fk"},url:n+"/tags/:id/documents/rel/:fk",method:"HEAD"},prototype$__get__documents:{isArray:!0,url:n+"/tags/:id/documents",method:"GET"},prototype$__count__documents:{url:n+"/tags/:id/documents/count",method:"GET"},create:{url:n+"/tags",method:"POST"},createMany:{isArray:!0,url:n+"/tags",method:"POST"},upsert:{url:n+"/tags",method:"PUT"},exists:{url:n+"/tags/:id/exists",method:"GET"},findById:{url:n+"/tags/:id",method:"GET"},find:{isArray:!0,url:n+"/tags",method:"GET"},findOne:{url:n+"/tags/findOne",method:"GET"},updateAll:{url:n+"/tags/update",method:"POST"},deleteById:{url:n+"/tags/:id",method:"DELETE"},count:{url:n+"/tags/count",method:"GET"},prototype$updateAttributes:{url:n+"/tags/:id",method:"PUT"},createChangeStream:{url:n+"/tags/change-stream",method:"POST"},findByUrl:{url:n+"/tags/url/:url",method:"GET"},existsByUrl:{url:n+"/tags/url/:url/exists",method:"GET"},__get__posts:{url:n+"/tags/url/:url/posts",method:"GET"},__get__pages:{url:n+"/tags/url/:url/pages",method:"GET"},__count__posts:{url:n+"/tags/url/:url/posts/count",method:"GET"},__count__pages:{url:n+"/tags/url/:url/pages/count",method:"GET"},__exists__posts:{url:n+"/tags/url/:url/posts/rel/:fk",method:"HEAD"},__exists__pages:{url:n+"/tags/url/:url/pages/rel/:fk",method:"HEAD"},"::findById::Document::tags":{params:{fk:"@fk"},url:n+"/documents/:id/tags/:fk",method:"GET"},"::destroyById::Document::tags":{params:{fk:"@fk"},url:n+"/documents/:id/tags/:fk",method:"DELETE"},"::updateById::Document::tags":{params:{fk:"@fk"},url:n+"/documents/:id/tags/:fk",method:"PUT"},"::link::Document::tags":{params:{fk:"@fk"},url:n+"/documents/:id/tags/rel/:fk",method:"PUT"},"::unlink::Document::tags":{params:{fk:"@fk"},url:n+"/documents/:id/tags/rel/:fk",method:"DELETE"},"::exists::Document::tags":{params:{fk:"@fk"},url:n+"/documents/:id/tags/rel/:fk",method:"HEAD"},"::get::Document::tags":{isArray:!0,url:n+"/documents/:id/tags",method:"GET"},"::create::Document::tags":{url:n+"/documents/:id/tags",method:"POST"},"::createMany::Document::tags":{isArray:!0,url:n+"/documents/:id/tags",method:"POST"},"::count::Document::tags":{url:n+"/documents/:id/tags/count",method:"GET"}});return a.updateOrCreate=a.upsert,a.update=a.updateAll,a.destroyById=a.deleteById,a.removeById=a.deleteById,a.modelName="Tag",a.documents=function(){var e=o.get("Document"),t=e["::get::Tag::documents"];return t.apply(a,arguments)},a.documents.count=function(){var e=o.get("Document"),t=e["::count::Tag::documents"];return t.apply(a,arguments)},a.documents.exists=function(){var e=o.get("Document"),t=e["::exists::Tag::documents"];return t.apply(a,arguments)},a}]),l.factory("Post",["LoopBackResource","LoopBackAuth","$injector",function(e,t,o){var a=e(n+"/posts/:id",{id:"@id"},{find:{isArray:!0,url:n+"/posts",method:"GET"},findOne:{url:n+"/posts/findOne",method:"GET"},count:{url:n+"/posts/count",method:"GET"},findByUrl:{url:n+"/posts/:url",method:"GET"},existsByUrl:{url:n+"/posts/:url/exists",method:"GET"},__get__tags:{url:n+"/posts/:url/tags",method:"GET"},__count__tags:{url:n+"/posts/:url/tags/count",method:"GET"},__exists__tags:{url:n+"/posts/:url/tags/rel/:fk",method:"HEAD"}});return a.modelName="Post",a}]),l.factory("Page",["LoopBackResource","LoopBackAuth","$injector",function(e,t,o){var a=e(n+"/pages/:id",{id:"@id"},{find:{isArray:!0,url:n+"/pages",method:"GET"},findOne:{url:n+"/pages/findOne",method:"GET"},count:{url:n+"/pages/count",method:"GET"},findByUrl:{url:n+"/pages/:url",method:"GET"},existsByUrl:{url:n+"/pages/:url/exists",method:"GET"},__get__tags:{url:n+"/pages/:url/tags",method:"GET"},__count__tags:{url:n+"/pages/:url/tags/count",method:"GET"},__exists__tags:{url:n+"/pages/:url/tags/rel/:fk",method:"HEAD"}});return a.modelName="Page",a}]),l.factory("User",["LoopBackResource","LoopBackAuth","$injector",function(e,t,o){var a=e(n+"/users/:id",{id:"@id"},{prototype$__findById__accessTokens:{params:{fk:"@fk"},url:n+"/users/:id/accessTokens/:fk",method:"GET"},prototype$__destroyById__accessTokens:{params:{fk:"@fk"},url:n+"/users/:id/accessTokens/:fk",method:"DELETE"},prototype$__updateById__accessTokens:{params:{fk:"@fk"},url:n+"/users/:id/accessTokens/:fk",method:"PUT"},prototype$__findById__documents:{params:{fk:"@fk"},url:n+"/users/:id/documents/:fk",method:"GET"},prototype$__destroyById__documents:{params:{fk:"@fk"},url:n+"/users/:id/documents/:fk",method:"DELETE"},prototype$__updateById__documents:{params:{fk:"@fk"},url:n+"/users/:id/documents/:fk",method:"PUT"},prototype$__create__accessTokens:{url:n+"/users/:id/accessTokens",method:"POST"},prototype$__delete__accessTokens:{url:n+"/users/:id/accessTokens",method:"DELETE"},prototype$__count__accessTokens:{url:n+"/users/:id/accessTokens/count",method:"GET"},prototype$__get__documents:{isArray:!0,url:n+"/users/:id/documents",method:"GET"},prototype$__create__documents:{url:n+"/users/:id/documents",method:"POST"},prototype$__delete__documents:{url:n+"/users/:id/documents",method:"DELETE"},prototype$__count__documents:{url:n+"/users/:id/documents/count",method:"GET"},create:{url:n+"/users",method:"POST"},createMany:{isArray:!0,url:n+"/users",method:"POST"},upsert:{url:n+"/users",method:"PUT"},exists:{url:n+"/users/:id/exists",method:"GET"},findById:{url:n+"/users/:id",method:"GET"},find:{isArray:!0,url:n+"/users",method:"GET"},findOne:{url:n+"/users/findOne",method:"GET"},updateAll:{url:n+"/users/update",method:"POST"},deleteById:{url:n+"/users/:id",method:"DELETE"},count:{url:n+"/users/count",method:"GET"},prototype$updateAttributes:{url:n+"/users/:id",method:"PUT"},createChangeStream:{url:n+"/users/change-stream",method:"POST"},login:{params:{include:"user"},interceptor:{response:function(e){var o=e.data;return t.setUser(o.id,o.userId,o.user),t.rememberMe=e.config.params.rememberMe!==!1,t.save(),e.resource}},url:n+"/users/login",method:"POST"},logout:{interceptor:{response:function(e){return t.clearUser(),t.clearStorage(),e.resource},responseError:function(e){return t.clearUser(),t.clearStorage(),e.resource}},url:n+"/users/logout",method:"POST"},confirm:{url:n+"/users/confirm",method:"GET"},resetPassword:{url:n+"/users/reset",method:"POST"},prototype$getRolesById:{url:n+"/users/:id/roles",method:"GET"},prototype$addRolesById:{url:n+"/users/:id/roles",method:"POST"},prototype$deleteRoleById:{url:n+"/users/:id/roles/:roleName",method:"DELETE"},"::get::Document::author":{url:n+"/documents/:id/author",method:"GET"},"::get::Document::updater":{url:n+"/documents/:id/updater",method:"GET"},getCurrent:{url:n+"/users/:id",method:"GET",params:{id:function(){var e=t.currentUserId;return null==e&&(e="__anonymous__"),e}},interceptor:{response:function(e){return t.currentUserData=e.data,e.resource}},__isGetCurrentUser__:!0}});return a.updateOrCreate=a.upsert,a.update=a.updateAll,a.destroyById=a.deleteById,a.removeById=a.deleteById,a.getCachedCurrent=function(){var e=t.currentUserData;return e?new a(e):null},a.isAuthenticated=function(){return null!=this.getCurrentId()},a.getCurrentId=function(){return t.currentUserId},a.modelName="User",a.documents=function(){var e=o.get("Document"),t=e["::get::User::documents"];return t.apply(a,arguments)},a.documents.count=function(){var e=o.get("Document"),t=e["::count::User::documents"];return t.apply(a,arguments)},a.documents.create=function(){var e=o.get("Document"),t=e["::create::User::documents"];return t.apply(a,arguments)},a.documents.createMany=function(){var e=o.get("Document"),t=e["::createMany::User::documents"];return t.apply(a,arguments)},a.documents.destroyAll=function(){var e=o.get("Document"),t=e["::delete::User::documents"];return t.apply(a,arguments)},a.documents.destroyById=function(){var e=o.get("Document"),t=e["::destroyById::User::documents"];return t.apply(a,arguments)},a.documents.findById=function(){var e=o.get("Document"),t=e["::findById::User::documents"];return t.apply(a,arguments)},a.documents.updateById=function(){var e=o.get("Document"),t=e["::updateById::User::documents"];return t.apply(a,arguments)},a}]),l.factory("Setting",["LoopBackResource","LoopBackAuth","$injector",function(e,t,o){var a=e(n+"/settings/:id",{id:"@id"},{create:{url:n+"/settings",method:"POST"},createMany:{isArray:!0,url:n+"/settings",method:"POST"},upsert:{url:n+"/settings",method:"PUT"},exists:{url:n+"/settings/:id/exists",method:"GET"},findById:{url:n+"/settings/:id",method:"GET"},find:{isArray:!0,url:n+"/settings",method:"GET"},findOne:{url:n+"/settings/findOne",method:"GET"},updateAll:{url:n+"/settings/update",method:"POST"},deleteById:{url:n+"/settings/:id",method:"DELETE"},count:{url:n+"/settings/count",method:"GET"},prototype$updateAttributes:{url:n+"/settings/:id",method:"PUT"},createChangeStream:{url:n+"/settings/change-stream",method:"POST"}});return a.updateOrCreate=a.upsert,a.update=a.updateAll,a.destroyById=a.deleteById,a.removeById=a.deleteById,a.modelName="Setting",a}]),l.factory("Render",["LoopBackResource","LoopBackAuth","$injector",function(e,t,o){var a=e(n+"/renders/:id",{id:"@id"},{indexRender:{url:n+"/renders/index-render",method:"POST"},postRender:{url:n+"/renders/post-render",method:"POST"},pageRender:{url:n+"/renders/page-render",method:"POST"},tagRender:{url:n+"/renders/tag-render",method:"POST"},authorRender:{url:n+"/renders/author-render",method:"POST"},renderAll:{url:n+"/renders/all",method:"POST"}});return a.modelName="Render",a}]),l.factory("LoopBackAuth",function(){function e(){var e=this;a.forEach(function(t){e[t]=o(t)}),this.currentUserData=null}function t(e,t,o){try{var a=n+t;null==o&&(o=""),e[a]=o}catch(s){console.log("Cannot access local/session storage:",s)}}function o(e){var t=n+e;return localStorage[t]||sessionStorage[t]||null}var a=["accessTokenId","currentUserId","rememberMe"],n="$LoopBack$";return e.prototype.save=function(){var e=this,o=this.rememberMe?localStorage:sessionStorage;a.forEach(function(a){t(o,a,e[a])})},e.prototype.setUser=function(e,t,o){this.accessTokenId=e,this.currentUserId=t,this.currentUserData=o},e.prototype.clearUser=function(){this.accessTokenId=null,this.currentUserId=null,this.currentUserData=null},e.prototype.clearStorage=function(){a.forEach(function(e){t(sessionStorage,e,null),t(localStorage,e,null)})},new e}).config(["$httpProvider",function(e){e.interceptors.push("LoopBackAuthRequestInterceptor")}]).factory("LoopBackAuthRequestInterceptor",["$q","LoopBackAuth",function(e,t){return{request:function(n){var l=a(n.url);if(l&&l!==r)return n;if(t.accessTokenId)n.headers[s]=t.accessTokenId;else if(n.__isGetCurrentUser__){var i={body:{error:{status:401}},status:401,config:n,headers:function(){return o}};return e.reject(i)}return n||e.when(n)}}}]).provider("LoopBackResource",function(){this.setAuthHeader=function(e){s=e},this.getAuthHeader=function(){return s},this.setUrlBase=function(e){n=e,r=a(n)||location.host},this.getUrlBase=function(){return n},this.$get=["$resource",function(e){var t=function(t,o,a){var n=e(t,o,a);return n.prototype.$save=function(e,t){var o=n.upsert.call(this,{},this,e,t);return o.$promise||o},n};return t.getUrlBase=function(){return n},t.getAuthHeader=function(){return s},t}]})}(window,window.angular),function(){"use strict";function e(e,t,o){o.html5Mode(!0),e.state("app",{url:"/console","abstract":!0,views:{main:{templateUrl:"console/core/layout/layout.template.html",controller:"MainController as vm"},"sidebar@app":{templateUrl:"console/core/sidebar/sidebar.template.html",controller:"SidebarController as vm"},"toolbar@app":{templateUrl:"console/core/toolbar/toolbar.template.html",controller:"ToolbarController as vm"}}}),t.otherwise("/console/login")}angular.module("blog").config(e),e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"]}.call(this),function(){"use strict";function e(e,t,o,a){var n,s;n=this,s=function(){return a.isLoaded},e.$watch(s,function(e){e&&(n.logo=a.currentSetting.logo,n.title=a.currentSetting.title)})}e.$inject=["$scope","Auth","User","BlogSetting"],angular.module("blog").controller("IndexController",e)}.call(this);