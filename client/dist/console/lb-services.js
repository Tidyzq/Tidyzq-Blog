"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="lbServices"),function(e,t,r){"use strict";function s(e){var t=e.match(/^(?:https?:)?\/\/([^\/]+)/);return t?t[1]:null}var o="/api",u="authorization",n=s(o)||location.host,d=t.module("lbServices",["ngResource"]);d.factory("Document",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var s=e(o+"/documents/:id",{id:"@id"},{prototype$__findById__tags:{params:{fk:"@fk"},url:o+"/documents/:id/tags/:fk",method:"GET"},prototype$__destroyById__tags:{params:{fk:"@fk"},url:o+"/documents/:id/tags/:fk",method:"DELETE"},prototype$__updateById__tags:{params:{fk:"@fk"},url:o+"/documents/:id/tags/:fk",method:"PUT"},prototype$__link__tags:{params:{fk:"@fk"},url:o+"/documents/:id/tags/rel/:fk",method:"PUT"},prototype$__unlink__tags:{params:{fk:"@fk"},url:o+"/documents/:id/tags/rel/:fk",method:"DELETE"},prototype$__exists__tags:{params:{fk:"@fk"},url:o+"/documents/:id/tags/rel/:fk",method:"HEAD"},prototype$__get__author:{url:o+"/documents/:id/author",method:"GET"},prototype$__get__updater:{url:o+"/documents/:id/updater",method:"GET"},prototype$__get__tags:{isArray:!0,url:o+"/documents/:id/tags",method:"GET"},prototype$__create__tags:{url:o+"/documents/:id/tags",method:"POST"},prototype$__count__tags:{url:o+"/documents/:id/tags/count",method:"GET"},create:{url:o+"/documents",method:"POST"},createMany:{isArray:!0,url:o+"/documents",method:"POST"},upsert:{url:o+"/documents",method:"PUT"},exists:{url:o+"/documents/:id/exists",method:"GET"},findById:{url:o+"/documents/:id",method:"GET"},find:{isArray:!0,url:o+"/documents",method:"GET"},findOne:{url:o+"/documents/findOne",method:"GET"},updateAll:{url:o+"/documents/update",method:"POST"},deleteById:{url:o+"/documents/:id",method:"DELETE"},count:{url:o+"/documents/count",method:"GET"},prototype$updateAttributes:{url:o+"/documents/:id",method:"PUT"},findByUrl:{url:o+"/documents/url/:url",method:"GET"},"::exists::Tag::documents":{params:{fk:"@fk"},url:o+"/tags/:id/documents/rel/:fk",method:"HEAD"},"::get::Tag::documents":{isArray:!0,url:o+"/tags/:id/documents",method:"GET"},"::count::Tag::documents":{url:o+"/tags/:id/documents/count",method:"GET"},"::findById::User::documents":{params:{fk:"@fk"},url:o+"/users/:id/documents/:fk",method:"GET"},"::destroyById::User::documents":{params:{fk:"@fk"},url:o+"/users/:id/documents/:fk",method:"DELETE"},"::updateById::User::documents":{params:{fk:"@fk"},url:o+"/users/:id/documents/:fk",method:"PUT"},"::get::User::documents":{isArray:!0,url:o+"/users/:id/documents",method:"GET"},"::create::User::documents":{url:o+"/users/:id/documents",method:"POST"},"::createMany::User::documents":{isArray:!0,url:o+"/users/:id/documents",method:"POST"},"::delete::User::documents":{url:o+"/users/:id/documents",method:"DELETE"},"::count::User::documents":{url:o+"/users/:id/documents/count",method:"GET"}});return s.updateOrCreate=s.upsert,s.update=s.updateAll,s.destroyById=s.deleteById,s.removeById=s.deleteById,s.modelName="Document",s.tags=function(){var e=r.get("Tag"),t=e["::get::Document::tags"];return t.apply(s,arguments)},s.tags.count=function(){var e=r.get("Tag"),t=e["::count::Document::tags"];return t.apply(s,arguments)},s.tags.create=function(){var e=r.get("Tag"),t=e["::create::Document::tags"];return t.apply(s,arguments)},s.tags.createMany=function(){var e=r.get("Tag"),t=e["::createMany::Document::tags"];return t.apply(s,arguments)},s.tags.destroyById=function(){var e=r.get("Tag"),t=e["::destroyById::Document::tags"];return t.apply(s,arguments)},s.tags.exists=function(){var e=r.get("Tag"),t=e["::exists::Document::tags"];return t.apply(s,arguments)},s.tags.findById=function(){var e=r.get("Tag"),t=e["::findById::Document::tags"];return t.apply(s,arguments)},s.tags.link=function(){var e=r.get("Tag"),t=e["::link::Document::tags"];return t.apply(s,arguments)},s.tags.unlink=function(){var e=r.get("Tag"),t=e["::unlink::Document::tags"];return t.apply(s,arguments)},s.tags.updateById=function(){var e=r.get("Tag"),t=e["::updateById::Document::tags"];return t.apply(s,arguments)},s.author=function(){var e=r.get("User"),t=e["::get::Document::author"];return t.apply(s,arguments)},s.updater=function(){var e=r.get("User"),t=e["::get::Document::updater"];return t.apply(s,arguments)},s}]),d.factory("Tag",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var s=e(o+"/tags/:id",{id:"@id"},{prototype$__exists__documents:{params:{fk:"@fk"},url:o+"/tags/:id/documents/rel/:fk",method:"HEAD"},prototype$__get__documents:{isArray:!0,url:o+"/tags/:id/documents",method:"GET"},prototype$__count__documents:{url:o+"/tags/:id/documents/count",method:"GET"},create:{url:o+"/tags",method:"POST"},createMany:{isArray:!0,url:o+"/tags",method:"POST"},upsert:{url:o+"/tags",method:"PUT"},exists:{url:o+"/tags/:id/exists",method:"GET"},findById:{url:o+"/tags/:id",method:"GET"},find:{isArray:!0,url:o+"/tags",method:"GET"},findOne:{url:o+"/tags/findOne",method:"GET"},updateAll:{url:o+"/tags/update",method:"POST"},deleteById:{url:o+"/tags/:id",method:"DELETE"},count:{url:o+"/tags/count",method:"GET"},prototype$updateAttributes:{url:o+"/tags/:id",method:"PUT"},createChangeStream:{url:o+"/tags/change-stream",method:"POST"},findByUrl:{url:o+"/tags/url/:url",method:"GET"},existsByUrl:{url:o+"/tags/url/:url/exists",method:"GET"},__get__posts:{url:o+"/tags/url/:url/posts",method:"GET"},__get__pages:{url:o+"/tags/url/:url/pages",method:"GET"},__count__posts:{url:o+"/tags/url/:url/posts/count",method:"GET"},__count__pages:{url:o+"/tags/url/:url/pages/count",method:"GET"},__exists__posts:{url:o+"/tags/url/:url/posts/rel/:fk",method:"HEAD"},__exists__pages:{url:o+"/tags/url/:url/pages/rel/:fk",method:"HEAD"},"::findById::Document::tags":{params:{fk:"@fk"},url:o+"/documents/:id/tags/:fk",method:"GET"},"::destroyById::Document::tags":{params:{fk:"@fk"},url:o+"/documents/:id/tags/:fk",method:"DELETE"},"::updateById::Document::tags":{params:{fk:"@fk"},url:o+"/documents/:id/tags/:fk",method:"PUT"},"::link::Document::tags":{params:{fk:"@fk"},url:o+"/documents/:id/tags/rel/:fk",method:"PUT"},"::unlink::Document::tags":{params:{fk:"@fk"},url:o+"/documents/:id/tags/rel/:fk",method:"DELETE"},"::exists::Document::tags":{params:{fk:"@fk"},url:o+"/documents/:id/tags/rel/:fk",method:"HEAD"},"::get::Document::tags":{isArray:!0,url:o+"/documents/:id/tags",method:"GET"},"::create::Document::tags":{url:o+"/documents/:id/tags",method:"POST"},"::createMany::Document::tags":{isArray:!0,url:o+"/documents/:id/tags",method:"POST"},"::count::Document::tags":{url:o+"/documents/:id/tags/count",method:"GET"}});return s.updateOrCreate=s.upsert,s.update=s.updateAll,s.destroyById=s.deleteById,s.removeById=s.deleteById,s.modelName="Tag",s.documents=function(){var e=r.get("Document"),t=e["::get::Tag::documents"];return t.apply(s,arguments)},s.documents.count=function(){var e=r.get("Document"),t=e["::count::Tag::documents"];return t.apply(s,arguments)},s.documents.exists=function(){var e=r.get("Document"),t=e["::exists::Tag::documents"];return t.apply(s,arguments)},s}]),d.factory("Post",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var s=e(o+"/posts/:id",{id:"@id"},{find:{isArray:!0,url:o+"/posts",method:"GET"},findOne:{url:o+"/posts/findOne",method:"GET"},count:{url:o+"/posts/count",method:"GET"},findByUrl:{url:o+"/posts/:url",method:"GET"},existsByUrl:{url:o+"/posts/:url/exists",method:"GET"},__get__tags:{url:o+"/posts/:url/tags",method:"GET"},__count__tags:{url:o+"/posts/:url/tags/count",method:"GET"},__exists__tags:{url:o+"/posts/:url/tags/rel/:fk",method:"HEAD"}});return s.modelName="Post",s}]),d.factory("Page",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var s=e(o+"/pages/:id",{id:"@id"},{find:{isArray:!0,url:o+"/pages",method:"GET"},findOne:{url:o+"/pages/findOne",method:"GET"},count:{url:o+"/pages/count",method:"GET"},findByUrl:{url:o+"/pages/:url",method:"GET"},existsByUrl:{url:o+"/pages/:url/exists",method:"GET"},__get__tags:{url:o+"/pages/:url/tags",method:"GET"},__count__tags:{url:o+"/pages/:url/tags/count",method:"GET"},__exists__tags:{url:o+"/pages/:url/tags/rel/:fk",method:"HEAD"}});return s.modelName="Page",s}]),d.factory("User",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var s=e(o+"/users/:id",{id:"@id"},{prototype$__findById__accessTokens:{params:{fk:"@fk"},url:o+"/users/:id/accessTokens/:fk",method:"GET"},prototype$__destroyById__accessTokens:{params:{fk:"@fk"},url:o+"/users/:id/accessTokens/:fk",method:"DELETE"},prototype$__updateById__accessTokens:{params:{fk:"@fk"},url:o+"/users/:id/accessTokens/:fk",method:"PUT"},prototype$__findById__documents:{params:{fk:"@fk"},url:o+"/users/:id/documents/:fk",method:"GET"},prototype$__destroyById__documents:{params:{fk:"@fk"},url:o+"/users/:id/documents/:fk",method:"DELETE"},prototype$__updateById__documents:{params:{fk:"@fk"},url:o+"/users/:id/documents/:fk",method:"PUT"},prototype$__create__accessTokens:{url:o+"/users/:id/accessTokens",method:"POST"},prototype$__delete__accessTokens:{url:o+"/users/:id/accessTokens",method:"DELETE"},prototype$__count__accessTokens:{url:o+"/users/:id/accessTokens/count",method:"GET"},prototype$__get__documents:{isArray:!0,url:o+"/users/:id/documents",method:"GET"},prototype$__create__documents:{url:o+"/users/:id/documents",method:"POST"},prototype$__delete__documents:{url:o+"/users/:id/documents",method:"DELETE"},prototype$__count__documents:{url:o+"/users/:id/documents/count",method:"GET"},create:{url:o+"/users",method:"POST"},createMany:{isArray:!0,url:o+"/users",method:"POST"},upsert:{url:o+"/users",method:"PUT"},exists:{url:o+"/users/:id/exists",method:"GET"},findById:{url:o+"/users/:id",method:"GET"},find:{isArray:!0,url:o+"/users",method:"GET"},findOne:{url:o+"/users/findOne",method:"GET"},updateAll:{url:o+"/users/update",method:"POST"},deleteById:{url:o+"/users/:id",method:"DELETE"},count:{url:o+"/users/count",method:"GET"},prototype$updateAttributes:{url:o+"/users/:id",method:"PUT"},createChangeStream:{url:o+"/users/change-stream",method:"POST"},login:{params:{include:"user"},interceptor:{response:function(e){var r=e.data;return t.setUser(r.id,r.userId,r.user),t.rememberMe=e.config.params.rememberMe!==!1,t.save(),e.resource}},url:o+"/users/login",method:"POST"},logout:{interceptor:{response:function(e){return t.clearUser(),t.clearStorage(),e.resource},responseError:function(e){return t.clearUser(),t.clearStorage(),e.resource}},url:o+"/users/logout",method:"POST"},confirm:{url:o+"/users/confirm",method:"GET"},resetPassword:{url:o+"/users/reset",method:"POST"},prototype$getRolesById:{url:o+"/users/:id/roles",method:"GET"},prototype$addRolesById:{url:o+"/users/:id/roles",method:"POST"},prototype$deleteRoleById:{url:o+"/users/:id/roles/:roleName",method:"DELETE"},"::get::Document::author":{url:o+"/documents/:id/author",method:"GET"},"::get::Document::updater":{url:o+"/documents/:id/updater",method:"GET"},getCurrent:{url:o+"/users/:id",method:"GET",params:{id:function(){var e=t.currentUserId;return null==e&&(e="__anonymous__"),e}},interceptor:{response:function(e){return t.currentUserData=e.data,e.resource}},__isGetCurrentUser__:!0}});return s.updateOrCreate=s.upsert,s.update=s.updateAll,s.destroyById=s.deleteById,s.removeById=s.deleteById,s.getCachedCurrent=function(){var e=t.currentUserData;return e?new s(e):null},s.isAuthenticated=function(){return null!=this.getCurrentId()},s.getCurrentId=function(){return t.currentUserId},s.modelName="User",s.documents=function(){var e=r.get("Document"),t=e["::get::User::documents"];return t.apply(s,arguments)},s.documents.count=function(){var e=r.get("Document"),t=e["::count::User::documents"];return t.apply(s,arguments)},s.documents.create=function(){var e=r.get("Document"),t=e["::create::User::documents"];return t.apply(s,arguments)},s.documents.createMany=function(){var e=r.get("Document"),t=e["::createMany::User::documents"];return t.apply(s,arguments)},s.documents.destroyAll=function(){var e=r.get("Document"),t=e["::delete::User::documents"];return t.apply(s,arguments)},s.documents.destroyById=function(){var e=r.get("Document"),t=e["::destroyById::User::documents"];return t.apply(s,arguments)},s.documents.findById=function(){var e=r.get("Document"),t=e["::findById::User::documents"];return t.apply(s,arguments)},s.documents.updateById=function(){var e=r.get("Document"),t=e["::updateById::User::documents"];return t.apply(s,arguments)},s}]),d.factory("Setting",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var s=e(o+"/settings/:id",{id:"@id"},{create:{url:o+"/settings",method:"POST"},createMany:{isArray:!0,url:o+"/settings",method:"POST"},upsert:{url:o+"/settings",method:"PUT"},exists:{url:o+"/settings/:id/exists",method:"GET"},findById:{url:o+"/settings/:id",method:"GET"},find:{isArray:!0,url:o+"/settings",method:"GET"},findOne:{url:o+"/settings/findOne",method:"GET"},updateAll:{url:o+"/settings/update",method:"POST"},deleteById:{url:o+"/settings/:id",method:"DELETE"},count:{url:o+"/settings/count",method:"GET"},prototype$updateAttributes:{url:o+"/settings/:id",method:"PUT"},createChangeStream:{url:o+"/settings/change-stream",method:"POST"}});return s.updateOrCreate=s.upsert,s.update=s.updateAll,s.destroyById=s.deleteById,s.removeById=s.deleteById,s.modelName="Setting",s}]),d.factory("Render",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var s=e(o+"/renders/:id",{id:"@id"},{indexRender:{url:o+"/renders/index-render",method:"POST"},postRender:{url:o+"/renders/post-render",method:"POST"},pageRender:{url:o+"/renders/page-render",method:"POST"},tagRender:{url:o+"/renders/tag-render",method:"POST"},authorRender:{url:o+"/renders/author-render",method:"POST"},renderAll:{url:o+"/renders/all",method:"POST"}});return s.modelName="Render",s}]),d.factory("LoopBackAuth",function(){function e(){var e=this;s.forEach(function(t){e[t]=r(t)}),this.currentUserData=null}function t(e,t,r){try{var s=o+t;null==r&&(r=""),e[s]=r}catch(u){console.log("Cannot access local/session storage:",u)}}function r(e){var t=o+e;return localStorage[t]||sessionStorage[t]||null}var s=["accessTokenId","currentUserId","rememberMe"],o="$LoopBack$";return e.prototype.save=function(){var e=this,r=this.rememberMe?localStorage:sessionStorage;s.forEach(function(s){t(r,s,e[s])})},e.prototype.setUser=function(e,t,r){this.accessTokenId=e,this.currentUserId=t,this.currentUserData=r},e.prototype.clearUser=function(){this.accessTokenId=null,this.currentUserId=null,this.currentUserData=null},e.prototype.clearStorage=function(){s.forEach(function(e){t(sessionStorage,e,null),t(localStorage,e,null)})},new e}).config(["$httpProvider",function(e){e.interceptors.push("LoopBackAuthRequestInterceptor")}]).factory("LoopBackAuthRequestInterceptor",["$q","LoopBackAuth",function(e,t){return{request:function(o){var d=s(o.url);if(d&&d!==n)return o;if(t.accessTokenId)o.headers[u]=t.accessTokenId;else if(o.__isGetCurrentUser__){var a={body:{error:{status:401}},status:401,config:o,headers:function(){return r}};return e.reject(a)}return o||e.when(o)}}}]).provider("LoopBackResource",function(){this.setAuthHeader=function(e){u=e},this.getAuthHeader=function(){return u},this.setUrlBase=function(e){o=e,n=s(o)||location.host},this.getUrlBase=function(){return o},this.$get=["$resource",function(e){var t=function(t,r,s){var o=e(t,r,s);return o.prototype.$save=function(e,t){var r=o.upsert.call(this,{},this,e,t);return r.$promise||r},o};return t.getUrlBase=function(){return o},t.getAuthHeader=function(){return u},t}]})}(window,window.angular);