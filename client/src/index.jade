doctype html
html(ng-app="app", lang="en")
  head
    meta(charset="utf-8")
    meta(http-equiv="X-UA-Compatible" content="IE=edge")
    meta(name="viewport", content="width=device-width, initial-scale=1")
    base(href="/")
    title Tidyzq's Blog
    // bower:css
    // css of bower components will be insert here
    // endbower
    // inject:css
    // css of app style will be insert here
    // endinject
  //- body
  body(ng-controller="IndexController as vm")
    #sign-in.modal.fade(tabindex="-1", role="dialog", aria-labelledby="sign-in-label")
      .modal-dialog
        .modal-content
          .modal-header
            center
              h3#sign-in-label.modal-title Sign In
          .modal-body
            form.form-horizontal(name="signInForm", ng-submit="vm.signIn()", novalidate)
              .form-group(ng-class="{ 'has-error' : signInForm.username.$invalid && !signInForm.username.$pristine }")
                label.col-sm-2.control-label(for="sign-in-username") Username
                .col-sm-10
                  input#sign-in-username.form-control(name="username", type="string", placeholder="Username", ng-model="vm.signInUser.username" required)
                  p.help-block(ng-show="signInForm.username.$invalid && !signInForm.username.$pristine") Username is required.
              .form-group(ng-class="{ 'has-error' : signInForm.password.$invalid && !signInForm.password.$pristine }")
                label.col-sm-2.control-label(for="sign-in-password") Password
                .col-sm-10
                  input#sign-in-password.form-control(name="password", type="password", placeholder="Password", ng-model="vm.signInUser.password" required)
                  p.help-block(ng-show="signInForm.password.$invalid && !signInForm.password.$pristine") Password is required.
              input.hide(type="submit", ng-disabled="signInForm.$invalid")
          .modal-footer
            button.btn.btn-default(type="button", data-dismiss="modal") Close
            button.btn.btn-primary(type="button", ng-click="vm.signIn()", ng-disabled="signInForm.$invalid") Submit
    #sign-up.modal.fade(tabindex="-1", role="dialog", aria-labelledby="sign-up-label")
      .modal-dialog
        .modal-content
          .modal-header
            center
              h3#sign-up-label.modal-title Sign Up
          .modal-body
            .alert.alert-danger(ng-show="vm.signUpFailMsg")
              button.close(type="button", aria-label="Close", ng-click="vm.hideSignUpFailMsg()")
                span(aria-hidden="true") &times;
              p {{ vm.signUpFailMsg }}
            form.form-horizontal(name="signUpForm", ng-submit="vm.signUp()", novalidate)
              //- Username
              .form-group(ng-class="{ 'has-error' : signUpForm.username.$invalid && !signUpForm.username.$pristine }")
                label.col-sm-2.control-label(for="sign-up-username") Username
                .col-sm-10
                  input#sign-up-username.form-control(name="username", type="string", placeholder="Username", ng-model="vm.signUpUser.username" required)
                  p.help-block(ng-show="signUpForm.username.$invalid && !signUpForm.username.$pristine") Username is required
              //- Email
              .form-group(ng-class="{ 'has-error' : signUpForm.email.$invalid && !signUpForm.email.$pristine }")
                label.col-sm-2.control-label(for="sign-up-email") Email
                .col-sm-10
                  input#sign-up-email.form-control(name="email", type="email", placeholder="Email", ng-model="vm.signUpUser.email" required)
                  p.help-block(ng-show="signUpForm.email.$error.required && !signUpForm.email.$pristine") Email is required
                  p.help-block(ng-show="signUpForm.email.$error.email && !signUpForm.email.$pristine") Plase input a correct email address
              //- Password
              .form-group(ng-class="{ 'has-error' : signUpForm.password.$invalid && !signUpForm.password.$pristine }")
                label.col-sm-2.control-label(for="sign-up-password") Password
                .col-sm-10
                  input#sign-up-password.form-control(name="password", type="password", placeholder="Password", ng-model="vm.signUpUser.password" required)
                  p.help-block(ng-show="signUpForm.password.$invalid && !signUpForm.password.$pristine") Password is required
              //- Repeat password
              .form-group(ng-class="{ 'has-error' : signUpForm.repeatPassword.$invalid && !signUpForm.repeatPassword.$pristine }")
                label.col-sm-2.control-label(for="sign-up-repeat-password") Repeat Password
                .col-sm-10
                  input#sign-up-repeat-password.form-control(name="repeatPassword", type="password", placeholder="Repeat Password", ng-model="vm.signUpUser.rpassword", compare-to="vm.signUpUser.password" required)
                  p.help-block(ng-show="signUpForm.repeatPassword.$invalid && !signUpForm.repeatPassword.$pristine") Password must be the same
              //- Hiden submit
              //- to support submit on enter key pressed
              input.hide(type="submit", ng-disabled="signUpForm.$invalid")
          .modal-footer
            button.btn.btn-default(type="button", data-dismiss="modal") Close
            button.btn.btn-primary(type="button", ng-click="vm.signUp()", ng-disabled="signUpForm.$invalid") Submit
    .navbar.navbar-inverse.navbar-fixed-top(role="navigation")
      .container
        .navbar-header
          button.navbar-toggle.collapsed(type="button", data-toggle="collapse", data-target="#navbar", aria-expanded="false")
            span.sr-only Toggle navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a.navbar-brand(href="/") Brand
        #navbar.collapse.navbar-collapse
          ul.nav.navbar-nav.navbar-right
            li.btn-group
              a#dropdown-sign-in.dropdown-toggle(ng-hide="vm.currentUser.id", href="#", type="button", data-toggle="dropdown") Sign In
                span.caret
              ul.dropdown-menu(role="menu", aria-labelledby="dropdown-sign-in")
                li
                  a.btn.btn-lg(href="#", type="button", data-toggle="modal", data-target="#sign-in") Sign In
                li
                  a.btn.btn-lg(href="#", type="button", data-toggle="modal", data-target="#sign-up") Sign Up
            li.btn-group
              a#dropdown-user.dropdown-toggle(ng-show="vm.currentUser.id", href="#", type="button", data-toggle="dropdown") {{vm.currentUser.username}}
                span.caret
              ul.dropdown-menu(role="menu", aria-labelledby="dropdown-user")
                li
                  a.btn.btn-lg(href="#", type="button", ng-click="vm.logOut()") Log Out
                //- li
                  //- a(href="#") {{ vm }}
    #main-content.container
      div(ui-view="content@app")
    // bower:js
    // js of bower components will be insert here
    // endbower
    // inject:js
    // js of app scripts will be insert here
    // endinject
